{
  "version": 3,
  "sources": ["dep:@web3-onboard_walletconnect", "../@web3-onboard/walletconnect/dist/index.js"],
  "sourcesContent": ["import d from \"./node_modules/@web3-onboard/walletconnect/dist/index.js\";export default d;", "import { StaticJsonRpcProvider } from '@ethersproject/providers';\nimport { ProviderRpcError, ProviderRpcErrorCode } from '@web3-onboard/common';\nfunction walletConnect(options) {\n    const { bridge = 'https://bridge.walletconnect.org', qrcodeModalOptions } = options || {};\n    return () => {\n        return {\n            label: 'WalletConnect',\n            getIcon: async () => (await import('./icon.js')).default,\n            getInterface: async ({ chains, EventEmitter }) => {\n                const { default: WalletConnect } = await import('@walletconnect/client');\n                const { default: QRCodeModal } = await import('@walletconnect/qrcode-modal');\n                const { Subject, fromEvent } = await import('rxjs');\n                const { takeUntil, take } = await import('rxjs/operators');\n                const connector = new WalletConnect({\n                    bridge\n                });\n                const emitter = new EventEmitter();\n                class EthProvider {\n                    constructor({ connector, chains }) {\n                        this.emit = emitter.emit.bind(emitter);\n                        this.on = emitter.on.bind(emitter);\n                        this.removeListener = emitter.removeListener.bind(emitter);\n                        this.connector = connector;\n                        this.chains = chains;\n                        this.disconnected$ = new Subject();\n                        this.providers = {};\n                        // listen for session updates\n                        fromEvent(this.connector, 'session_update', (error, payload) => {\n                            if (error) {\n                                throw error;\n                            }\n                            return payload;\n                        })\n                            .pipe(takeUntil(this.disconnected$))\n                            .subscribe({\n                            next: ({ params }) => {\n                                const [{ accounts, chainId }] = params;\n                                this.emit('accountsChanged', accounts);\n                                this.emit('chainChanged', `0x${chainId.toString(16)}`);\n                            },\n                            error: console.warn\n                        });\n                        // listen for disconnect event\n                        fromEvent(this.connector, 'disconnect', (error, payload) => {\n                            if (error) {\n                                throw error;\n                            }\n                            return payload;\n                        })\n                            .pipe(takeUntil(this.disconnected$))\n                            .subscribe({\n                            next: () => {\n                                this.emit('accountsChanged', []);\n                                this.disconnected$.next(true);\n                                typeof localStorage !== 'undefined' &&\n                                    localStorage.removeItem('walletconnect');\n                            },\n                            error: console.warn\n                        });\n                        this.disconnect = () => this.connector.killSession();\n                        this.request = async ({ method, params }) => {\n                            if (method === 'eth_chainId') {\n                                return `0x${this.connector.chainId.toString(16)}`;\n                            }\n                            if (method === 'eth_requestAccounts') {\n                                return new Promise((resolve, reject) => {\n                                    // Check if connection is already established\n                                    if (!this.connector.connected) {\n                                        // create new session\n                                        this.connector.createSession().then(() => {\n                                            QRCodeModal.open(this.connector.uri, () => reject(new ProviderRpcError({\n                                                code: 4001,\n                                                message: 'User rejected the request.'\n                                            })), qrcodeModalOptions);\n                                        });\n                                    }\n                                    else {\n                                        const { accounts, chainId } = this.connector.session;\n                                        this.emit('chainChanged', `0x${chainId.toString(16)}`);\n                                        return resolve(accounts);\n                                    }\n                                    // Subscribe to connection events\n                                    fromEvent(this.connector, 'connect', (error, payload) => {\n                                        if (error) {\n                                            throw error;\n                                        }\n                                        return payload;\n                                    })\n                                        .pipe(take(1))\n                                        .subscribe({\n                                        next: ({ params }) => {\n                                            const [{ accounts, chainId }] = params;\n                                            this.emit('accountsChanged', accounts);\n                                            this.emit('chainChanged', `0x${chainId.toString(16)}`);\n                                            QRCodeModal.close();\n                                            resolve(accounts);\n                                        },\n                                        error: reject\n                                    });\n                                });\n                            }\n                            if (method === 'wallet_switchEthereumChain' ||\n                                method === 'eth_selectAccounts') {\n                                throw new ProviderRpcError({\n                                    code: ProviderRpcErrorCode.UNSUPPORTED_METHOD,\n                                    message: `The Provider does not support the requested method: ${method}`\n                                });\n                            }\n                            // @ts-ignore\n                            if (method === 'eth_sendTransaction') {\n                                // @ts-ignore\n                                return this.connector.sendTransaction(params[0]);\n                            }\n                            // @ts-ignore\n                            if (method === 'eth_signTransaction') {\n                                // @ts-ignore\n                                return this.connector.signTransaction(params[0]);\n                            }\n                            // @ts-ignore\n                            if (method === 'personal_sign') {\n                                // @ts-ignore\n                                return this.connector.signPersonalMessage(params);\n                            }\n                            // @ts-ignore\n                            if (method === 'eth_sign') {\n                                // @ts-ignore\n                                return this.connector.signMessage(params);\n                            }\n                            // @ts-ignore\n                            if (method === 'eth_signTypedData') {\n                                // @ts-ignore\n                                return this.connector.signTypedData(params);\n                            }\n                            if (method === 'eth_accounts') {\n                                return this.connector.sendCustomRequest({\n                                    id: 1337,\n                                    jsonrpc: '2.0',\n                                    method,\n                                    params\n                                });\n                            }\n                            const chainId = await this.request({ method: 'eth_chainId' });\n                            if (!this.providers[chainId]) {\n                                const currentChain = chains.find(({ id }) => id === chainId);\n                                if (!currentChain) {\n                                    throw new ProviderRpcError({\n                                        code: ProviderRpcErrorCode.CHAIN_NOT_ADDED,\n                                        message: `The Provider does not have a rpcUrl to make a request for the requested method: ${method}`\n                                    });\n                                }\n                                this.providers[chainId] = new StaticJsonRpcProvider(currentChain.rpcUrl);\n                            }\n                            return this.providers[chainId].send(method, params);\n                        };\n                    }\n                }\n                return {\n                    provider: new EthProvider({ chains, connector })\n                };\n            }\n        };\n    };\n}\nexport default walletConnect;\n"],
  "mappings": "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",
  "names": []
}
