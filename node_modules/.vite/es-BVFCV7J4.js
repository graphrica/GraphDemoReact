import {
  __require,
  define_process_env_default,
  init_define_process_env
} from "./chunk-KJE66DWM.js";

// node_modules/magic-sdk/dist/es/index.js
init_define_process_env();

// node_modules/@magic-sdk/provider/dist/es/index.js
init_define_process_env();

// node_modules/@magic-sdk/types/dist/es/index.js
init_define_process_env();
var a = ((n) => (n.MissingApiKey = "MISSING_API_KEY", n.ModalNotReady = "MODAL_NOT_READY", n.MalformedResponse = "MALFORMED_RESPONSE", n.InvalidArgument = "INVALID_ARGUMENT", n.ExtensionNotInitialized = "EXTENSION_NOT_INITIALIZED", n.IncompatibleExtensions = "INCOMPATIBLE_EXTENSIONS", n))(a || {});
var p = ((_2) => (_2.SyncWeb3Method = "SYNC_WEB3_METHOD", _2.DuplicateIframe = "DUPLICATE_IFRAME", _2.ReactNativeEndpointConfiguration = "REACT_NATIVE_ENDPOINT_CONFIGURATION", _2.DeprecationNotice = "DEPRECATION_NOTICE", _2))(p || {});
var m = ((e) => (e[e.ParseError = -32700] = "ParseError", e[e.InvalidRequest = -32600] = "InvalidRequest", e[e.MethodNotFound = -32601] = "MethodNotFound", e[e.InvalidParams = -32602] = "InvalidParams", e[e.InternalError = -32603] = "InternalError", e[e.MagicLinkFailedVerification = -1e4] = "MagicLinkFailedVerification", e[e.MagicLinkExpired = -10001] = "MagicLinkExpired", e[e.MagicLinkRateLimited = -10002] = "MagicLinkRateLimited", e[e.MagicLinkInvalidRedirectURL = -10006] = "MagicLinkInvalidRedirectURL", e[e.UserAlreadyLoggedIn = -10003] = "UserAlreadyLoggedIn", e[e.UpdateEmailFailed = -10004] = "UpdateEmailFailed", e[e.UserRequestEditEmail = -10005] = "UserRequestEditEmail", e[e.InactiveRecipient = -10010] = "InactiveRecipient", e[e.AccessDeniedToUser = -10011] = "AccessDeniedToUser", e))(m || {});
var u = ((t) => (t.LoginWithSms = "magic_auth_login_with_sms", t.LoginWithMagicLink = "magic_auth_login_with_magic_link", t.LoginWithCredential = "magic_auth_login_with_credential", t.GetIdToken = "magic_auth_get_id_token", t.GenerateIdToken = "magic_auth_generate_id_token", t.GetMetadata = "magic_auth_get_metadata", t.IsLoggedIn = "magic_auth_is_logged_in", t.Logout = "magic_auth_logout", t.UpdateEmail = "magic_auth_update_email", t.UserSettings = "magic_auth_settings", t.UserSettingsTestMode = "magic_auth_settings_testing_mode", t.LoginWithSmsTestMode = "magic_auth_login_with_sms_testing_mode", t.LoginWithMagicLinkTestMode = "magic_login_with_magic_link_testing_mode", t.LoginWithCredentialTestMode = "magic_auth_login_with_credential_testing_mode", t.GetIdTokenTestMode = "magic_auth_get_id_token_testing_mode", t.GenerateIdTokenTestMode = "magic_auth_generate_id_token_testing_mode", t.GetMetadataTestMode = "magic_auth_get_metadata_testing_mode", t.IsLoggedInTestMode = "magic_auth_is_logged_in_testing_mode", t.LogoutTestMode = "magic_auth_logout_testing_mode", t.UpdateEmailTestMode = "magic_auth_update_email_testing_mode", t))(u || {});
var o = ((i) => (i.MAGIC_HANDLE_RESPONSE = "MAGIC_HANDLE_RESPONSE", i.MAGIC_OVERLAY_READY = "MAGIC_OVERLAY_READY", i.MAGIC_SHOW_OVERLAY = "MAGIC_SHOW_OVERLAY", i.MAGIC_HIDE_OVERLAY = "MAGIC_HIDE_OVERLAY", i.MAGIC_HANDLE_EVENT = "MAGIC_HANDLE_EVENT", i))(o || {});
var g = ((s) => (s.MAGIC_HANDLE_REQUEST = "MAGIC_HANDLE_REQUEST", s))(g || {});
var l = ((s) => (s.Harmony = "HARMONY", s))(l || {});

// node_modules/@magic-sdk/provider/dist/es/index.js
var gt = Object.create;
var U = Object.defineProperty;
var Rt = Object.defineProperties;
var Tt = Object.getOwnPropertyDescriptor;
var vt = Object.getOwnPropertyDescriptors;
var xt = Object.getOwnPropertyNames;
var $e = Object.getOwnPropertySymbols;
var It = Object.getPrototypeOf;
var be = Object.prototype.hasOwnProperty;
var Pt = Object.prototype.propertyIsEnumerable;
var Me = (t, e, n) => e in t ? U(t, e, { enumerable: true, configurable: true, writable: true, value: n }) : t[e] = n;
var Ne = (t, e) => {
  for (var n in e || (e = {}))
    be.call(e, n) && Me(t, n, e[n]);
  if ($e)
    for (var n of $e(e))
      Pt.call(e, n) && Me(t, n, e[n]);
  return t;
};
var Ae = (t, e) => Rt(t, vt(e));
var $t = (t) => U(t, "__esModule", { value: true });
var bt = (t, e) => () => (e || t((e = { exports: {} }).exports, e), e.exports);
var Mt = (t, e) => {
  for (var n in e)
    U(t, n, { get: e[n], enumerable: true });
};
var Nt = (t, e, n, r) => {
  if (e && typeof e == "object" || typeof e == "function")
    for (let s of xt(e))
      !be.call(t, s) && (n || s !== "default") && U(t, s, { get: () => e[s], enumerable: !(r = Tt(e, s)) || r.enumerable });
  return t;
};
var At = (t, e) => Nt($t(U(t != null ? gt(It(t)) : {}, "default", !e && t && t.__esModule ? { get: () => t.default, enumerable: true } : { value: t, enumerable: true })), t);
var I = (t, e, n) => new Promise((r, s) => {
  var o2 = (c) => {
    try {
      i(n.next(c));
    } catch (p2) {
      s(p2);
    }
  }, a2 = (c) => {
    try {
      i(n.throw(c));
    } catch (p2) {
      s(p2);
    }
  }, i = (c) => c.done ? r(c.value) : Promise.resolve(c.value).then(o2, a2);
  i((n = n.apply(t, e)).next());
});
var nt = bt((fr, he) => {
  "use strict";
  var $n = Object.prototype.hasOwnProperty, T = "~";
  function B() {
  }
  Object.create && (B.prototype = /* @__PURE__ */ Object.create(null), new B().__proto__ || (T = false));
  function bn(t, e, n) {
    this.fn = t, this.context = e, this.once = n || false;
  }
  function tt2(t, e, n, r, s) {
    if (typeof n != "function")
      throw new TypeError("The listener must be a function");
    var o2 = new bn(n, r || t, s), a2 = T ? T + e : e;
    return t._events[a2] ? t._events[a2].fn ? t._events[a2] = [t._events[a2], o2] : t._events[a2].push(o2) : (t._events[a2] = o2, t._eventsCount++), t;
  }
  function se2(t, e) {
    --t._eventsCount === 0 ? t._events = new B() : delete t._events[e];
  }
  function g2() {
    this._events = new B(), this._eventsCount = 0;
  }
  g2.prototype.eventNames = function() {
    var e = [], n, r;
    if (this._eventsCount === 0)
      return e;
    for (r in n = this._events)
      $n.call(n, r) && e.push(T ? r.slice(1) : r);
    return Object.getOwnPropertySymbols ? e.concat(Object.getOwnPropertySymbols(n)) : e;
  };
  g2.prototype.listeners = function(e) {
    var n = T ? T + e : e, r = this._events[n];
    if (!r)
      return [];
    if (r.fn)
      return [r.fn];
    for (var s = 0, o2 = r.length, a2 = new Array(o2); s < o2; s++)
      a2[s] = r[s].fn;
    return a2;
  };
  g2.prototype.listenerCount = function(e) {
    var n = T ? T + e : e, r = this._events[n];
    return r ? r.fn ? 1 : r.length : 0;
  };
  g2.prototype.emit = function(e, n, r, s, o2, a2) {
    var i = T ? T + e : e;
    if (!this._events[i])
      return false;
    var c = this._events[i], p2 = arguments.length, l2, u2;
    if (c.fn) {
      switch (c.once && this.removeListener(e, c.fn, void 0, true), p2) {
        case 1:
          return c.fn.call(c.context), true;
        case 2:
          return c.fn.call(c.context, n), true;
        case 3:
          return c.fn.call(c.context, n, r), true;
        case 4:
          return c.fn.call(c.context, n, r, s), true;
        case 5:
          return c.fn.call(c.context, n, r, s, o2), true;
        case 6:
          return c.fn.call(c.context, n, r, s, o2, a2), true;
      }
      for (u2 = 1, l2 = new Array(p2 - 1); u2 < p2; u2++)
        l2[u2 - 1] = arguments[u2];
      c.fn.apply(c.context, l2);
    } else {
      var v = c.length, M;
      for (u2 = 0; u2 < v; u2++)
        switch (c[u2].once && this.removeListener(e, c[u2].fn, void 0, true), p2) {
          case 1:
            c[u2].fn.call(c[u2].context);
            break;
          case 2:
            c[u2].fn.call(c[u2].context, n);
            break;
          case 3:
            c[u2].fn.call(c[u2].context, n, r);
            break;
          case 4:
            c[u2].fn.call(c[u2].context, n, r, s);
            break;
          default:
            if (!l2)
              for (M = 1, l2 = new Array(p2 - 1); M < p2; M++)
                l2[M - 1] = arguments[M];
            c[u2].fn.apply(c[u2].context, l2);
        }
    }
    return true;
  };
  g2.prototype.on = function(e, n, r) {
    return tt2(this, e, n, r, false);
  };
  g2.prototype.once = function(e, n, r) {
    return tt2(this, e, n, r, true);
  };
  g2.prototype.removeListener = function(e, n, r, s) {
    var o2 = T ? T + e : e;
    if (!this._events[o2])
      return this;
    if (!n)
      return se2(this, o2), this;
    var a2 = this._events[o2];
    if (a2.fn)
      a2.fn === n && (!s || a2.once) && (!r || a2.context === r) && se2(this, o2);
    else {
      for (var i = 0, c = [], p2 = a2.length; i < p2; i++)
        (a2[i].fn !== n || s && !a2[i].once || r && a2[i].context !== r) && c.push(a2[i]);
      c.length ? this._events[o2] = c.length === 1 ? c[0] : c : se2(this, o2);
    }
    return this;
  };
  g2.prototype.removeAllListeners = function(e) {
    var n;
    return e ? (n = T ? T + e : e, this._events[n] && se2(this, n)) : (this._events = new B(), this._eventsCount = 0), this;
  };
  g2.prototype.off = g2.prototype.removeListener;
  g2.prototype.addListener = g2.prototype.on;
  g2.prefixed = T;
  g2.EventEmitter = g2;
  typeof he != "undefined" && (he.exports = g2);
});
function wt(t) {
  let e = { exports: {} };
  return t(e, e.exports), e.exports;
}
var St = Number.MAX_SAFE_INTEGER || 9007199254740991;
var de = { SEMVER_SPEC_VERSION: "2.0.0", MAX_LENGTH: 256, MAX_SAFE_INTEGER: St, MAX_SAFE_COMPONENT_LENGTH: 16 };
var Lt = typeof process == "object" && define_process_env_default && define_process_env_default.NODE_DEBUG && /\bsemver\b/i.test(define_process_env_default.NODE_DEBUG) ? (...t) => console.error("SEMVER", ...t) : () => {
};
var d = Lt;
var K = wt(function(t, e) {
  let { MAX_SAFE_COMPONENT_LENGTH: n } = de, r = (e = t.exports = {}).re = [], s = e.src = [], o2 = e.t = {}, a2 = 0, i = (c, p2, l2) => {
    let u2 = a2++;
    d(u2, p2), o2[c] = u2, s[u2] = p2, r[u2] = new RegExp(p2, l2 ? "g" : void 0);
  };
  i("NUMERICIDENTIFIER", "0|[1-9]\\d*"), i("NUMERICIDENTIFIERLOOSE", "[0-9]+"), i("NONNUMERICIDENTIFIER", "\\d*[a-zA-Z-][a-zA-Z0-9-]*"), i("MAINVERSION", `(${s[o2.NUMERICIDENTIFIER]})\\.(${s[o2.NUMERICIDENTIFIER]})\\.(${s[o2.NUMERICIDENTIFIER]})`), i("MAINVERSIONLOOSE", `(${s[o2.NUMERICIDENTIFIERLOOSE]})\\.(${s[o2.NUMERICIDENTIFIERLOOSE]})\\.(${s[o2.NUMERICIDENTIFIERLOOSE]})`), i("PRERELEASEIDENTIFIER", `(?:${s[o2.NUMERICIDENTIFIER]}|${s[o2.NONNUMERICIDENTIFIER]})`), i("PRERELEASEIDENTIFIERLOOSE", `(?:${s[o2.NUMERICIDENTIFIERLOOSE]}|${s[o2.NONNUMERICIDENTIFIER]})`), i("PRERELEASE", `(?:-(${s[o2.PRERELEASEIDENTIFIER]}(?:\\.${s[o2.PRERELEASEIDENTIFIER]})*))`), i("PRERELEASELOOSE", `(?:-?(${s[o2.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[o2.PRERELEASEIDENTIFIERLOOSE]})*))`), i("BUILDIDENTIFIER", "[0-9A-Za-z-]+"), i("BUILD", `(?:\\+(${s[o2.BUILDIDENTIFIER]}(?:\\.${s[o2.BUILDIDENTIFIER]})*))`), i("FULLPLAIN", `v?${s[o2.MAINVERSION]}${s[o2.PRERELEASE]}?${s[o2.BUILD]}?`), i("FULL", `^${s[o2.FULLPLAIN]}$`), i("LOOSEPLAIN", `[v=\\s]*${s[o2.MAINVERSIONLOOSE]}${s[o2.PRERELEASELOOSE]}?${s[o2.BUILD]}?`), i("LOOSE", `^${s[o2.LOOSEPLAIN]}$`), i("GTLT", "((?:<|>)?=?)"), i("XRANGEIDENTIFIERLOOSE", `${s[o2.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`), i("XRANGEIDENTIFIER", `${s[o2.NUMERICIDENTIFIER]}|x|X|\\*`), i("XRANGEPLAIN", `[v=\\s]*(${s[o2.XRANGEIDENTIFIER]})(?:\\.(${s[o2.XRANGEIDENTIFIER]})(?:\\.(${s[o2.XRANGEIDENTIFIER]})(?:${s[o2.PRERELEASE]})?${s[o2.BUILD]}?)?)?`), i("XRANGEPLAINLOOSE", `[v=\\s]*(${s[o2.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[o2.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[o2.XRANGEIDENTIFIERLOOSE]})(?:${s[o2.PRERELEASELOOSE]})?${s[o2.BUILD]}?)?)?`), i("XRANGE", `^${s[o2.GTLT]}\\s*${s[o2.XRANGEPLAIN]}$`), i("XRANGELOOSE", `^${s[o2.GTLT]}\\s*${s[o2.XRANGEPLAINLOOSE]}$`), i("COERCE", `(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`), i("COERCERTL", s[o2.COERCE], true), i("LONETILDE", "(?:~>?)"), i("TILDETRIM", `(\\s*)${s[o2.LONETILDE]}\\s+`, true), e.tildeTrimReplace = "$1~", i("TILDE", `^${s[o2.LONETILDE]}${s[o2.XRANGEPLAIN]}$`), i("TILDELOOSE", `^${s[o2.LONETILDE]}${s[o2.XRANGEPLAINLOOSE]}$`), i("LONECARET", "(?:\\^)"), i("CARETTRIM", `(\\s*)${s[o2.LONECARET]}\\s+`, true), e.caretTrimReplace = "$1^", i("CARET", `^${s[o2.LONECARET]}${s[o2.XRANGEPLAIN]}$`), i("CARETLOOSE", `^${s[o2.LONECARET]}${s[o2.XRANGEPLAINLOOSE]}$`), i("COMPARATORLOOSE", `^${s[o2.GTLT]}\\s*(${s[o2.LOOSEPLAIN]})$|^$`), i("COMPARATOR", `^${s[o2.GTLT]}\\s*(${s[o2.FULLPLAIN]})$|^$`), i("COMPARATORTRIM", `(\\s*)${s[o2.GTLT]}\\s*(${s[o2.LOOSEPLAIN]}|${s[o2.XRANGEPLAIN]})`, true), e.comparatorTrimReplace = "$1$2$3", i("HYPHENRANGE", `^\\s*(${s[o2.XRANGEPLAIN]})\\s+-\\s+(${s[o2.XRANGEPLAIN]})\\s*$`), i("HYPHENRANGELOOSE", `^\\s*(${s[o2.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[o2.XRANGEPLAINLOOSE]})\\s*$`), i("STAR", "(<|>)?=?\\s*\\*"), i("GTE0", "^\\s*>=\\s*0.0.0\\s*$"), i("GTE0PRE", "^\\s*>=\\s*0.0.0-0\\s*$");
});
var we = /^[0-9]+$/;
var Se = (t, e) => {
  let n = we.test(t), r = we.test(e);
  return n && r && (t = +t, e = +e), t === e ? 0 : n && !r ? -1 : r && !n ? 1 : t < e ? -1 : 1;
};
var Ct = (t, e) => Se(e, t);
var Ot = { compareIdentifiers: Se, rcompareIdentifiers: Ct };
var { MAX_LENGTH: Le, MAX_SAFE_INTEGER: z } = de;
var { re: Ce, t: Oe } = K;
var { compareIdentifiers: j } = Ot;
var E = class {
  constructor(e, n) {
    if (n && typeof n == "object" || (n = { loose: !!n, includePrerelease: false }), e instanceof E) {
      if (e.loose === !!n.loose && e.includePrerelease === !!n.includePrerelease)
        return e;
      e = e.version;
    } else if (typeof e != "string")
      throw new TypeError(`Invalid Version: ${e}`);
    if (e.length > Le)
      throw new TypeError(`version is longer than ${Le} characters`);
    d("SemVer", e, n), this.options = n, this.loose = !!n.loose, this.includePrerelease = !!n.includePrerelease;
    let r = e.trim().match(n.loose ? Ce[Oe.LOOSE] : Ce[Oe.FULL]);
    if (!r)
      throw new TypeError(`Invalid Version: ${e}`);
    if (this.raw = e, this.major = +r[1], this.minor = +r[2], this.patch = +r[3], this.major > z || this.major < 0)
      throw new TypeError("Invalid major version");
    if (this.minor > z || this.minor < 0)
      throw new TypeError("Invalid minor version");
    if (this.patch > z || this.patch < 0)
      throw new TypeError("Invalid patch version");
    r[4] ? this.prerelease = r[4].split(".").map((s) => {
      if (/^[0-9]+$/.test(s)) {
        let o2 = +s;
        if (o2 >= 0 && o2 < z)
          return o2;
      }
      return s;
    }) : this.prerelease = [], this.build = r[5] ? r[5].split(".") : [], this.format();
  }
  format() {
    return this.version = `${this.major}.${this.minor}.${this.patch}`, this.prerelease.length && (this.version += `-${this.prerelease.join(".")}`), this.version;
  }
  toString() {
    return this.version;
  }
  compare(e) {
    if (d("SemVer.compare", this.version, this.options, e), !(e instanceof E)) {
      if (typeof e == "string" && e === this.version)
        return 0;
      e = new E(e, this.options);
    }
    return e.version === this.version ? 0 : this.compareMain(e) || this.comparePre(e);
  }
  compareMain(e) {
    return e instanceof E || (e = new E(e, this.options)), j(this.major, e.major) || j(this.minor, e.minor) || j(this.patch, e.patch);
  }
  comparePre(e) {
    if (e instanceof E || (e = new E(e, this.options)), this.prerelease.length && !e.prerelease.length)
      return -1;
    if (!this.prerelease.length && e.prerelease.length)
      return 1;
    if (!this.prerelease.length && !e.prerelease.length)
      return 0;
    let n = 0;
    do {
      let r = this.prerelease[n], s = e.prerelease[n];
      if (d("prerelease compare", n, r, s), r === void 0 && s === void 0)
        return 0;
      if (s === void 0)
        return 1;
      if (r === void 0)
        return -1;
      if (r !== s)
        return j(r, s);
    } while (++n);
  }
  compareBuild(e) {
    e instanceof E || (e = new E(e, this.options));
    let n = 0;
    do {
      let r = this.build[n], s = e.build[n];
      if (d("prerelease compare", n, r, s), r === void 0 && s === void 0)
        return 0;
      if (s === void 0)
        return 1;
      if (r === void 0)
        return -1;
      if (r !== s)
        return j(r, s);
    } while (++n);
  }
  inc(e, n) {
    switch (e) {
      case "premajor":
        this.prerelease.length = 0, this.patch = 0, this.minor = 0, this.major++, this.inc("pre", n);
        break;
      case "preminor":
        this.prerelease.length = 0, this.patch = 0, this.minor++, this.inc("pre", n);
        break;
      case "prepatch":
        this.prerelease.length = 0, this.inc("patch", n), this.inc("pre", n);
        break;
      case "prerelease":
        this.prerelease.length === 0 && this.inc("patch", n), this.inc("pre", n);
        break;
      case "major":
        this.minor === 0 && this.patch === 0 && this.prerelease.length !== 0 || this.major++, this.minor = 0, this.patch = 0, this.prerelease = [];
        break;
      case "minor":
        this.patch === 0 && this.prerelease.length !== 0 || this.minor++, this.patch = 0, this.prerelease = [];
        break;
      case "patch":
        this.prerelease.length === 0 && this.patch++, this.prerelease = [];
        break;
      case "pre":
        if (this.prerelease.length === 0)
          this.prerelease = [0];
        else {
          let r = this.prerelease.length;
          for (; --r >= 0; )
            typeof this.prerelease[r] == "number" && (this.prerelease[r]++, r = -2);
          r === -1 && this.prerelease.push(0);
        }
        n && (this.prerelease[0] === n ? isNaN(this.prerelease[1]) && (this.prerelease = [n, 0]) : this.prerelease = [n, 0]);
        break;
      default:
        throw new Error(`invalid increment argument: ${e}`);
    }
    return this.format(), this.raw = this.version, this;
  }
};
var _t = (t, e, n) => new E(t, n).compare(new E(e, n));
var D = _t;
var Dt = (t, e, n) => D(t, e, n) === 0;
var kt = Dt;
var Jt = (t, e, n) => D(t, e, n) !== 0;
var qt = Jt;
var Gt = (t, e, n) => D(t, e, n) > 0;
var Ut = Gt;
var Kt = (t, e, n) => D(t, e, n) >= 0;
var jt = Kt;
var Ft = (t, e, n) => D(t, e, n) < 0;
var Wt = Ft;
var Xt = (t, e, n) => D(t, e, n) <= 0;
var Bt = Xt;
var Ht = (t, e, n, r) => {
  switch (e) {
    case "===":
      return typeof t == "object" && (t = t.version), typeof n == "object" && (n = n.version), t === n;
    case "!==":
      return typeof t == "object" && (t = t.version), typeof n == "object" && (n = n.version), t !== n;
    case "":
    case "=":
    case "==":
      return kt(t, n, r);
    case "!=":
      return qt(t, n, r);
    case ">":
      return Ut(t, n, r);
    case ">=":
      return jt(t, n, r);
    case "<":
      return Wt(t, n, r);
    case "<=":
      return Bt(t, n, r);
    default:
      throw new TypeError(`Invalid operator: ${e}`);
  }
};
var me = Ht;
var F = Symbol("SemVer ANY");
var L = class {
  static get ANY() {
    return F;
  }
  constructor(e, n) {
    if (n && typeof n == "object" || (n = { loose: !!n, includePrerelease: false }), e instanceof L) {
      if (e.loose === !!n.loose)
        return e;
      e = e.value;
    }
    d("comparator", e, n), this.options = n, this.loose = !!n.loose, this.parse(e), this.semver === F ? this.value = "" : this.value = this.operator + this.semver.version, d("comp", this);
  }
  parse(e) {
    let n = this.options.loose ? _e[De.COMPARATORLOOSE] : _e[De.COMPARATOR], r = e.match(n);
    if (!r)
      throw new TypeError(`Invalid comparator: ${e}`);
    this.operator = r[1] !== void 0 ? r[1] : "", this.operator === "=" && (this.operator = ""), r[2] ? this.semver = new E(r[2], this.options.loose) : this.semver = F;
  }
  toString() {
    return this.value;
  }
  test(e) {
    if (d("Comparator.test", e, this.options.loose), this.semver === F || e === F)
      return true;
    if (typeof e == "string")
      try {
        e = new E(e, this.options);
      } catch (n) {
        return false;
      }
    return me(e, this.operator, this.semver, this.options);
  }
  intersects(e, n) {
    if (!(e instanceof L))
      throw new TypeError("a Comparator is required");
    if (n && typeof n == "object" || (n = { loose: !!n, includePrerelease: false }), this.operator === "")
      return this.value === "" || new N(e.value, n).test(this.value);
    if (e.operator === "")
      return e.value === "" || new N(this.value, n).test(e.semver);
    let r = !(this.operator !== ">=" && this.operator !== ">" || e.operator !== ">=" && e.operator !== ">"), s = !(this.operator !== "<=" && this.operator !== "<" || e.operator !== "<=" && e.operator !== "<"), o2 = this.semver.version === e.semver.version, a2 = !(this.operator !== ">=" && this.operator !== "<=" || e.operator !== ">=" && e.operator !== "<="), i = me(this.semver, "<", e.semver, n) && (this.operator === ">=" || this.operator === ">") && (e.operator === "<=" || e.operator === "<"), c = me(this.semver, ">", e.semver, n) && (this.operator === "<=" || this.operator === "<") && (e.operator === ">=" || e.operator === ">");
    return r || s || o2 && a2 || i || c;
  }
};
var { re: _e, t: De } = K;
var N = class {
  constructor(e, n) {
    if (n && typeof n == "object" || (n = { loose: !!n, includePrerelease: false }), e instanceof N)
      return e.loose === !!n.loose && e.includePrerelease === !!n.includePrerelease ? e : new N(e.raw, n);
    if (e instanceof L)
      return this.raw = e.value, this.set = [[e]], this.format(), this;
    if (this.options = n, this.loose = !!n.loose, this.includePrerelease = !!n.includePrerelease, this.raw = e, this.set = e.split(/\s*\|\|\s*/).map((r) => this.parseRange(r.trim())).filter((r) => r.length), !this.set.length)
      throw new TypeError(`Invalid SemVer Range: ${e}`);
    this.format();
  }
  format() {
    return this.range = this.set.map((e) => e.join(" ").trim()).join("||").trim(), this.range;
  }
  toString() {
    return this.range;
  }
  parseRange(e) {
    let { loose: n } = this.options;
    e = e.trim();
    let r = n ? y[h.HYPHENRANGELOOSE] : y[h.HYPHENRANGE];
    e = e.replace(r, cn(this.options.includePrerelease)), d("hyphen replace", e), e = e.replace(y[h.COMPARATORTRIM], Vt), d("comparator trim", e, y[h.COMPARATORTRIM]), e = (e = (e = e.replace(y[h.TILDETRIM], zt)).replace(y[h.CARETTRIM], Yt)).split(/\s+/).join(" ");
    let s = n ? y[h.COMPARATORLOOSE] : y[h.COMPARATOR];
    return e.split(" ").map((o2) => Zt(o2, this.options)).join(" ").split(/\s+/).map((o2) => an(o2, this.options)).filter(this.options.loose ? (o2) => !!o2.match(s) : () => true).map((o2) => new L(o2, this.options));
  }
  intersects(e, n) {
    if (!(e instanceof N))
      throw new TypeError("a Range is required");
    return this.set.some((r) => ke(r, n) && e.set.some((s) => ke(s, n) && r.every((o2) => s.every((a2) => o2.intersects(a2, n)))));
  }
  test(e) {
    if (!e)
      return false;
    if (typeof e == "string")
      try {
        e = new E(e, this.options);
      } catch (n) {
        return false;
      }
    for (let n = 0; n < this.set.length; n++)
      if (ln(this.set[n], e, this.options))
        return true;
    return false;
  }
};
var { re: y, t: h, comparatorTrimReplace: Vt, tildeTrimReplace: zt, caretTrimReplace: Yt } = K;
var ke = (t, e) => {
  let n = true, r = t.slice(), s = r.pop();
  for (; n && r.length; )
    n = r.every((o2) => s.intersects(o2, e)), s = r.pop();
  return n;
};
var Zt = (t, e) => (d("comp", t, e), t = tn(t, e), d("caret", t), t = Qt(t, e), d("tildes", t), t = rn(t, e), d("xrange", t), t = on(t, e), d("stars", t), t);
var R = (t) => !t || t.toLowerCase() === "x" || t === "*";
var Qt = (t, e) => t.trim().split(/\s+/).map((n) => en(n, e)).join(" ");
var en = (t, e) => {
  let n = e.loose ? y[h.TILDELOOSE] : y[h.TILDE];
  return t.replace(n, (r, s, o2, a2, i) => {
    let c;
    return d("tilde", t, r, s, o2, a2, i), R(s) ? c = "" : R(o2) ? c = `>=${s}.0.0 <${+s + 1}.0.0-0` : R(a2) ? c = `>=${s}.${o2}.0 <${s}.${+o2 + 1}.0-0` : i ? (d("replaceTilde pr", i), c = `>=${s}.${o2}.${a2}-${i} <${s}.${+o2 + 1}.0-0`) : c = `>=${s}.${o2}.${a2} <${s}.${+o2 + 1}.0-0`, d("tilde return", c), c;
  });
};
var tn = (t, e) => t.trim().split(/\s+/).map((n) => nn(n, e)).join(" ");
var nn = (t, e) => {
  d("caret", t, e);
  let n = e.loose ? y[h.CARETLOOSE] : y[h.CARET], r = e.includePrerelease ? "-0" : "";
  return t.replace(n, (s, o2, a2, i, c) => {
    let p2;
    return d("caret", t, s, o2, a2, i, c), R(o2) ? p2 = "" : R(a2) ? p2 = `>=${o2}.0.0${r} <${+o2 + 1}.0.0-0` : R(i) ? p2 = o2 === "0" ? `>=${o2}.${a2}.0${r} <${o2}.${+a2 + 1}.0-0` : `>=${o2}.${a2}.0${r} <${+o2 + 1}.0.0-0` : c ? (d("replaceCaret pr", c), p2 = o2 === "0" ? a2 === "0" ? `>=${o2}.${a2}.${i}-${c} <${o2}.${a2}.${+i + 1}-0` : `>=${o2}.${a2}.${i}-${c} <${o2}.${+a2 + 1}.0-0` : `>=${o2}.${a2}.${i}-${c} <${+o2 + 1}.0.0-0`) : (d("no pr"), p2 = o2 === "0" ? a2 === "0" ? `>=${o2}.${a2}.${i}${r} <${o2}.${a2}.${+i + 1}-0` : `>=${o2}.${a2}.${i}${r} <${o2}.${+a2 + 1}.0-0` : `>=${o2}.${a2}.${i} <${+o2 + 1}.0.0-0`), d("caret return", p2), p2;
  });
};
var rn = (t, e) => (d("replaceXRanges", t, e), t.split(/\s+/).map((n) => sn(n, e)).join(" "));
var sn = (t, e) => {
  t = t.trim();
  let n = e.loose ? y[h.XRANGELOOSE] : y[h.XRANGE];
  return t.replace(n, (r, s, o2, a2, i, c) => {
    d("xRange", t, r, s, o2, a2, i, c);
    let p2 = R(o2), l2 = p2 || R(a2), u2 = l2 || R(i), v = u2;
    return s === "=" && v && (s = ""), c = e.includePrerelease ? "-0" : "", p2 ? r = s === ">" || s === "<" ? "<0.0.0-0" : "*" : s && v ? (l2 && (a2 = 0), i = 0, s === ">" ? (s = ">=", l2 ? (o2 = +o2 + 1, a2 = 0, i = 0) : (a2 = +a2 + 1, i = 0)) : s === "<=" && (s = "<", l2 ? o2 = +o2 + 1 : a2 = +a2 + 1), s === "<" && (c = "-0"), r = `${s + o2}.${a2}.${i}${c}`) : l2 ? r = `>=${o2}.0.0${c} <${+o2 + 1}.0.0-0` : u2 && (r = `>=${o2}.${a2}.0${c} <${o2}.${+a2 + 1}.0-0`), d("xRange return", r), r;
  });
};
var on = (t, e) => (d("replaceStars", t, e), t.trim().replace(y[h.STAR], ""));
var an = (t, e) => (d("replaceGTE0", t, e), t.trim().replace(y[e.includePrerelease ? h.GTE0PRE : h.GTE0], ""));
var cn = (t) => (e, n, r, s, o2, a2, i, c, p2, l2, u2, v, M) => `${n = R(r) ? "" : R(s) ? `>=${r}.0.0${t ? "-0" : ""}` : R(o2) ? `>=${r}.${s}.0${t ? "-0" : ""}` : a2 ? `>=${n}` : `>=${n}${t ? "-0" : ""}`} ${c = R(p2) ? "" : R(l2) ? `<${+p2 + 1}.0.0-0` : R(u2) ? `<${p2}.${+l2 + 1}.0-0` : v ? `<=${p2}.${l2}.${u2}-${v}` : t ? `<${p2}.${l2}.${+u2 + 1}-0` : `<=${c}`}`.trim();
var ln = (t, e, n) => {
  for (let r = 0; r < t.length; r++)
    if (!t[r].test(e))
      return false;
  if (e.prerelease.length && !n.includePrerelease) {
    for (let r = 0; r < t.length; r++)
      if (d(t[r].semver), t[r].semver !== L.ANY && t[r].semver.prerelease.length > 0) {
        let s = t[r].semver;
        if (s.major === e.major && s.minor === e.minor && s.patch === e.patch)
          return true;
      }
    return false;
  }
  return true;
};
var Je = (t, e, n) => {
  try {
    e = new N(e, n);
  } catch (r) {
    return false;
  }
  return e.test(t);
};
var { MAX_LENGTH: pn } = de;
var { re: qe, t: Ge } = K;
var un = (t, e) => {
  if (e && typeof e == "object" || (e = { loose: !!e, includePrerelease: false }), t instanceof E)
    return t;
  if (typeof t != "string" || t.length > pn || !(e.loose ? qe[Ge.LOOSE] : qe[Ge.FULL]).test(t))
    return null;
  try {
    return new E(t, e);
  } catch (n) {
    return null;
  }
};
var dn = un;
var { re: Y, t: Z } = K;
var Ue = (t, e) => {
  if (t instanceof E)
    return t;
  if (typeof t == "number" && (t = String(t)), typeof t != "string")
    return null;
  let n = null;
  if ((e = e || {}).rtl) {
    let r;
    for (; (r = Y[Z.COERCERTL].exec(t)) && (!n || n.index + n[0].length !== t.length); )
      n && r.index + r[0].length === n.index + n[0].length || (n = r), Y[Z.COERCERTL].lastIndex = r.index + r[1].length + r[2].length;
    Y[Z.COERCERTL].lastIndex = -1;
  } else
    n = t.match(Y[Z.COERCE]);
  return n === null ? null : dn(`${n[2]}.${n[3] || "0"}.${n[4] || "0"}`, e);
};
function mn(t) {
  return String.fromCharCode(parseInt(t.slice(1), 16));
}
function En(t) {
  return `%${`00${t.charCodeAt(0).toString(16)}`.slice(-2)}`;
}
function hn(t) {
  return btoa(encodeURIComponent(t).replace(/%[0-9A-F]{2}/g, mn));
}
function fn(t) {
  return decodeURIComponent(Array.from(atob(t), En).join(""));
}
function Q(t) {
  return hn(JSON.stringify(t));
}
function Ke(t) {
  return JSON.parse(fn(t));
}
function $(t) {
  return typeof t == "undefined";
}
function Rn(t) {
  return t === null;
}
function ee(t) {
  return Rn(t) || $(t);
}
function je(t) {
  return ee(t) ? false : !$(t.jsonrpc) && !$(t.id) && (!$(t.result) || !$(t.error));
}
function Fe(t) {
  return ee(t) ? false : typeof t == "number" && Object.values(m).includes(t);
}
function te(t) {
  if (!t)
    return true;
  for (let e in t)
    if (Object.hasOwnProperty.call(t, e))
      return false;
  return true;
}
var m2 = {};
function Tn(t, e) {
  return Object.assign(m2, e), t;
}
var We = { "magic-sdk": "magic-sdk", "@magic-sdk/react-native": "magic-sdk-rn" };
var b = class extends Error {
  constructor(e, n) {
    super(`Magic SDK Error: [${e}] ${n}`);
    this.code = e;
    this.rawMessage = n;
    this.__proto__ = Error;
    Object.setPrototypeOf(this, b.prototype);
  }
};
var A = class extends Error {
  constructor(e) {
    super();
    this.__proto__ = Error;
    let n = Number(e == null ? void 0 : e.code);
    this.rawMessage = (e == null ? void 0 : e.message) || "Internal error", this.code = Fe(n) ? n : m.InternalError, this.message = `Magic RPC Error: [${this.code}] ${this.rawMessage}`, Object.setPrototypeOf(this, A.prototype);
  }
};
var W = class {
  constructor(e, n) {
    this.code = e;
    this.rawMessage = n;
    this.message = `Magic SDK Warning: [${e}] ${n}`;
  }
  log() {
    console.warn(this.message);
  }
};
var X = class extends Error {
  constructor(e, n, r, s) {
    super(`Magic Extension Error (${e.name}): [${n}] ${r}`);
    this.code = n;
    this.rawMessage = r;
    this.data = s;
    this.__proto__ = Error;
    Object.setPrototypeOf(this, X.prototype);
  }
};
var re = class {
  constructor(e, n, r) {
    this.code = n;
    this.rawMessage = r;
    this.message = `Magic Extension Warning (${e.name}): [${n}] ${r}`;
  }
  log() {
    console.warn(this.message);
  }
};
function Xe() {
  return new b(a.MissingApiKey, "Please provide an API key that you acquired from the Magic developer dashboard.");
}
function cr() {
  return new b(a.ModalNotReady, "Modal is not ready.");
}
function Be() {
  return new b(a.MalformedResponse, "Response from the Magic iframe is malformed.");
}
function He(t) {
  return new b(a.ExtensionNotInitialized, `Extensions must be initialized with a Magic SDK instance before \`Extension.${t}\` can be accessed. Do not invoke \`Extension.${t}\` inside an extension constructor.`);
}
function Ve(t) {
  let e = `Some extensions are incompatible with \`${m2.sdkName}@${m2.version}\`:`;
  return t.filter((n) => typeof n.compat != "undefined" && n.compat !== null).forEach((n) => {
    let r = n.compat[m2.sdkName];
    typeof r == "string" ? e += `
  - Extension \`${n.name}\` supports version(s) \`${r}\`` : r || (e += `
  - Extension \`${n.name}\` does not support ${m2.platform} environments.`);
  }), new b(a.IncompatibleExtensions, e);
}
function ze(t) {
  let e = (n) => {
    let r = n + 1, s = r % 10, o2 = r % 100;
    return s === 1 && o2 !== 11 ? `${r}st` : s === 2 && o2 !== 12 ? `${r}nd` : s === 3 && o2 !== 13 ? `${r}rd` : `${r}th`;
  };
  return new b(a.InvalidArgument, `Invalid ${e(t.argument)} argument given to \`${t.procedure}\`.
  Expected: \`${t.expected}\`
  Received: \`${t.received}\``);
}
function lr() {
  return new W(p.DuplicateIframe, "Duplicate iframes found.");
}
function Ye() {
  return new W(p.SyncWeb3Method, "Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.");
}
function Ze() {
  return new W(p.ReactNativeEndpointConfiguration, `CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${m2.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`);
}
function* xn() {
  let t = 0;
  for (; ; )
    t < Number.MAX_SAFE_INTEGER ? yield ++t : t = 0;
}
var In = xn();
function Ee() {
  return In.next().value;
}
var Qe = Symbol("Payload pre-processed by Magic SDK");
function et(t) {
  return Object.defineProperty(t, Qe, { value: true, enumerable: false }), t;
}
function Pn(t) {
  return !!t[Qe];
}
function C(t) {
  var e, n, r;
  return Pn(t) || (t.jsonrpc = (e = t.jsonrpc) != null ? e : "2.0", t.id = Ee(), t.method = (n = t.method) != null ? n : "noop", t.params = (r = t.params) != null ? r : [], et(t)), t;
}
function f(t, e = []) {
  return et({ params: e, method: t, jsonrpc: "2.0", id: Ee() });
}
var O = class {
  constructor(e) {
    e instanceof O ? (this._jsonrpc = e.payload.jsonrpc, this._id = e.payload.id, this._result = e.payload.result, this._error = e.payload.error) : je(e) ? (this._jsonrpc = e.jsonrpc, this._id = e.id, this._result = e.result, this._error = e.error) : (this._jsonrpc = e.jsonrpc, this._id = e.id, this._result = void 0, this._error = void 0);
  }
  applyError(e) {
    return this._error = e, this;
  }
  applyResult(e) {
    return this._result = e, this;
  }
  get hasError() {
    return typeof this._error != "undefined" && this._error !== null;
  }
  get hasResult() {
    return typeof this._result != "undefined";
  }
  get payload() {
    return { jsonrpc: this._jsonrpc, id: this._id, result: this._result, error: this._error };
  }
};
var rt = At(nt());
var st = class extends rt.default {
};
function oe() {
  let t = new st();
  return { emitter: t, createChainingEmitterMethod: (r, s) => (...o2) => (t[r].apply(t, o2), s), createBoundEmitterMethod: (r) => (...s) => t[r].apply(t, s) };
}
var ot = Symbol("isPromiEvent");
function it(t) {
  return !!t[ot];
}
function ie(t) {
  let e = fe(t), { createBoundEmitterMethod: n, createChainingEmitterMethod: r } = oe(), s = Symbol("Promise.then"), o2 = Symbol("Promise.catch"), a2 = Symbol("Promise.finally"), i = (l2, u2) => (...v) => {
    let M = u2[l2].apply(u2, v);
    return c(M);
  }, c = (l2) => Object.assign(l2, { [ot]: true, [s]: l2[s] || l2.then, [o2]: l2[o2] || l2.catch, [a2]: l2[a2] || l2.finally, then: i(s, l2), catch: i(o2, l2), finally: i(a2, l2), on: r("on", l2), once: r("once", l2), addListener: r("addListener", l2), off: r("off", l2), removeListener: r("removeListener", l2), removeAllListeners: r("removeAllListeners", l2), emit: n("emit"), eventNames: n("eventNames"), listeners: n("listeners"), listenerCount: n("listenerCount") }), p2 = c(e.then((l2) => (p2.emit("done", l2), p2.emit("settled"), l2), (l2) => {
    throw p2.emit("error", l2), p2.emit("settled"), l2;
  }));
  return p2;
}
function fe(t) {
  return new Promise((e, n) => {
    let r = t(e, n);
    Promise.resolve(r).catch(n);
  });
}
var P = class {
  constructor(e) {
    this.sdk = e;
  }
  get overlay() {
    return this.sdk.overlay;
  }
  request(e) {
    let n = this.overlay.post(g.MAGIC_HANDLE_REQUEST, C(e)), r = ie((o2, a2) => {
      n.then((i) => {
        if (s(), i.hasError)
          a2(new A(i.payload.error));
        else if (i.hasResult)
          o2(i.payload.result);
        else
          throw Be();
      }).catch((i) => {
        s(), a2(i);
      });
    }), s = this.overlay.on(o.MAGIC_HANDLE_EVENT, (o2) => {
      var i;
      let { response: a2 } = o2.data;
      if (a2.id === e.id && ((i = a2.result) == null ? void 0 : i.event)) {
        let { event: c, params: p2 = [] } = a2.result;
        r.emit(c, ...p2);
      }
    });
    return r;
  }
};
var ye = class extends P {
  loginWithMagicLink(e) {
    let { email: n, showUI: r = true, redirectURI: s } = e, o2 = f(this.sdk.testMode ? u.LoginWithMagicLinkTestMode : u.LoginWithMagicLink, [{ email: n, showUI: r, redirectURI: s }]);
    return this.request(o2);
  }
  loginWithSMS(e) {
    let { phoneNumber: n } = e, r = f(this.sdk.testMode ? u.LoginWithSmsTestMode : u.LoginWithSms, [{ phoneNumber: n, showUI: true }]);
    return this.request(r);
  }
  loginWithCredential(e) {
    let n = e != null ? e : "";
    if (!e && m2.platform === "web") {
      n = window.location.search;
      let s = window.location.origin + window.location.pathname;
      window.history.replaceState(null, "", s);
    }
    let r = f(this.sdk.testMode ? u.LoginWithCredentialTestMode : u.LoginWithCredential, [n]);
    return this.request(r);
  }
};
var H = {};
Mt(H, { clear: () => An, getItem: () => _, iterate: () => Cn, key: () => Sn, keys: () => Ln, length: () => wn, removeItem: () => ce, setItem: () => q });
var ae;
function w(t) {
  return (...e) => I(this, null, function* () {
    return ae || (ae = yield m2.configureStorage()), yield ae.ready(), ae[t](...e);
  });
}
var _ = w("getItem");
var q = w("setItem");
var ce = w("removeItem");
var An = w("clear");
var wn = w("length");
var Sn = w("key");
var Ln = w("keys");
var Cn = w("iterate");
function at() {
  let t = window.crypto.getRandomValues(new Uint8Array(16));
  t[6] = t[6] & 15 | 64, t[8] = t[8] & 191 | 128;
  let e = "";
  return e += t[0].toString(16), e += t[1].toString(16), e += t[2].toString(16), e += t[3].toString(16), e += "-", e += t[4].toString(16), e += t[5].toString(16), e += "-", e += t[6].toString(16), e += t[7].toString(16), e += "-", e += t[8].toString(16), e += t[9].toString(16), e += "-", e += t[10].toString(16), e += t[11].toString(16), e += t[12].toString(16), e += t[13].toString(16), e += t[14].toString(16), e += t[15].toString(16), e;
}
var ge = "STORE_KEY_PRIVATE_KEY";
var le = "STORE_KEY_PUBLIC_JWK";
var Re = "ECDSA";
var ct = "P-256";
var On = { name: Re, namedCurve: ct };
var _n = { name: Re, namedCurve: ct };
function lt() {
  ce(le), ce(ge);
}
function pt() {
  return I(this, null, function* () {
    let t = yield Dn();
    if (!t) {
      console.info("unable to create public key or webcrypto is unsupported");
      return;
    }
    let { subtle: e } = window.crypto, n = yield _(ge);
    if (!n || !e) {
      console.info("unable to find private key or webcrypto unsupported");
      return;
    }
    let r = { iat: Math.floor(new Date().getTime() / 1e3), jti: at() }, s = { typ: "dpop+jwt", alg: "ES256", jwk: t }, o2 = { protected: ut(JSON.stringify(s)), claims: ut(JSON.stringify(r)) }, a2 = qn(`${o2.protected}.${o2.claims}`), i = { name: Re, hash: { name: "SHA-256" } }, c = Un(new Uint8Array(yield e.sign(i, n, a2)));
    return `${o2.protected}.${o2.claims}.${c}`;
  });
}
function Dn() {
  return I(this, null, function* () {
    if (!Jn()) {
      console.info("webcrypto is not supported");
      return;
    }
    return (yield _(le)) || (yield kn()), _(le);
  });
}
function kn() {
  return I(this, null, function* () {
    let t = null, { subtle: e } = window.crypto, n = yield e.generateKey(On, true, ["sign"]), r = yield e.exportKey("jwk", n.privateKey);
    t = yield e.exportKey("jwk", n.publicKey);
    let s = yield e.importKey("jwk", r, _n, false, ["sign"]);
    yield q(ge, s), yield q(le, t);
  });
}
function Jn() {
  let t = typeof window != "undefined" && !!window.crypto, e = t && !!window.crypto.subtle;
  return t && e;
}
function ut(t) {
  return dt(Gn(t));
}
function qn(t) {
  return new TextEncoder().encode(t);
}
function dt(t) {
  return btoa(t).replace(/\+/g, "-").replace(/\//g, "_").replace(/=+/g, "");
}
function Gn(t) {
  return encodeURIComponent(t).replace(/%([0-9A-F]{2})/g, (n, r) => String.fromCharCode(parseInt(r, 16)));
}
function Un(t) {
  let e = "";
  return t.forEach((n) => {
    e += String.fromCharCode(n);
  }), dt(e);
}
var Te = class extends P {
  getIdToken(e) {
    let n = f(this.sdk.testMode ? u.GetIdTokenTestMode : u.GetIdToken, [e]);
    return this.request(n);
  }
  generateIdToken(e) {
    let n = f(this.sdk.testMode ? u.GenerateIdTokenTestMode : u.GenerateIdToken, [e]);
    return this.request(n);
  }
  getMetadata() {
    let e = f(this.sdk.testMode ? u.GetMetadataTestMode : u.GetMetadata);
    return this.request(e);
  }
  updateEmail(e) {
    let { email: n, showUI: r = true } = e, s = f(this.sdk.testMode ? u.UpdateEmailTestMode : u.UpdateEmail, [{ email: n, showUI: r }]);
    return this.request(s);
  }
  isLoggedIn() {
    let e = f(this.sdk.testMode ? u.IsLoggedInTestMode : u.IsLoggedIn);
    return this.request(e);
  }
  logout() {
    lt();
    let e = f(this.sdk.testMode ? u.LogoutTestMode : u.Logout);
    return this.request(e);
  }
  showSettings() {
    let e = f(this.sdk.testMode ? u.UserSettingsTestMode : u.UserSettings);
    return this.request(e);
  }
};
var { createBoundEmitterMethod: pe, createChainingEmitterMethod: G } = oe();
var ve = class extends P {
  constructor() {
    super(...arguments);
    this.isMagic = true;
    this.on = G("on", this);
    this.once = G("once", this);
    this.addListener = G("addListener", this);
    this.off = G("off", this);
    this.removeListener = G("removeListener", this);
    this.removeAllListeners = G("removeAllListeners", this);
    this.emit = pe("emit");
    this.eventNames = pe("eventNames");
    this.listeners = pe("listeners");
    this.listenerCount = pe("listenerCount");
  }
  sendAsync(e, n) {
    if (!n)
      throw ze({ procedure: "Magic.rpcProvider.sendAsync", argument: 1, expected: "function", received: n === null ? "null" : typeof n });
    if (Array.isArray(e))
      this.overlay.post(g.MAGIC_HANDLE_REQUEST, e.map((r) => {
        let s = C(r);
        return this.prefixPayloadMethodForTestMode(s), s;
      })).then((r) => {
        n(null, r.map((s) => Ae(Ne({}, s.payload), { error: s.hasError ? new A(s.payload.error) : null })));
      });
    else {
      let r = C(e);
      this.prefixPayloadMethodForTestMode(r), this.overlay.post(g.MAGIC_HANDLE_REQUEST, r).then((s) => {
        n(s.hasError ? new A(s.payload.error) : null, s.payload);
      });
    }
  }
  send(e, n) {
    if (typeof e == "string") {
      let s = f(e, Array.isArray(n) ? n : []);
      return this.request(s);
    }
    if (Array.isArray(e) || !!n) {
      this.sendAsync(e, n);
      return;
    }
    let r = Ye();
    return r.log(), new O(e).applyError({ code: -32603, message: r.rawMessage }).payload;
  }
  enable() {
    let e = f("eth_accounts");
    return this.request(e);
  }
  request(e) {
    return this.prefixPayloadMethodForTestMode(e), super.request(e);
  }
  prefixPayloadMethodForTestMode(e) {
    let n = "testMode/eth/";
    this.sdk.testMode && (e.method = `${n}${e.method}`);
  }
};
function xe(t, e) {
  return e ? new URL(t, e) : new URL(t);
}
var Et = ["request", "overlay", "sdk"];
function Kn(t) {
  let e = Object.getPrototypeOf(t), n = [e];
  for (; e !== P.prototype; )
    e = Object.getPrototypeOf(e), n.push(e);
  return n;
}
var Ie = class extends P {
  constructor() {
    super(void 0);
    this.__sdk_access_field_descriptors__ = /* @__PURE__ */ new Map();
    this.__is_initialized__ = false;
    this.utils = { createPromiEvent: ie, isPromiEvent: it, encodeJSON: Q, decodeJSON: Ke, createJsonRpcRequestPayload: f, standardizeJsonRpcRequestPayload: C, storage: H };
    let e = [this, ...Kn(this)];
    Et.forEach((n) => {
      let r = e.map((i) => Object.getOwnPropertyDescriptor(i, n)), s = r.findIndex((i) => !!i), o2 = s > 0, a2 = r[s];
      a2 && (this.__sdk_access_field_descriptors__.set(n, { descriptor: a2, isPrototypeField: o2 }), Object.defineProperty(this, n, { configurable: true, get: () => {
        throw He(n);
      } }));
    });
  }
  init(e) {
    this.__is_initialized__ || (Et.forEach((n) => {
      if (this.__sdk_access_field_descriptors__.has(n)) {
        let { descriptor: r, isPrototypeField: s } = this.__sdk_access_field_descriptors__.get(n);
        s ? delete this[n] : Object.defineProperty(this, n, r);
      }
    }), this.sdk = e, this.__is_initialized__ = true);
  }
  createDeprecationWarning(e) {
    let { method: n, removalVersion: r, useInstead: s } = e, o2 = s ? ` Use \`${s}\` instead.` : "", a2 = `\`${n}\` will be removed from this Extension in version \`${r}\`.${o2}`;
    return new re(this, "DEPRECATION_NOTICE", a2);
  }
  createWarning(e, n) {
    return new re(this, e, n);
  }
  createError(e, n, r) {
    return new X(this, e, n, r);
  }
};
var ht = class extends Ie {
};
var S = class extends Ie {
};
S.Internal = ht, S.Anonymous = "anonymous extension";
function ft(t) {
  return t.compat && t.compat[m2.sdkName] != null ? typeof t.compat[m2.sdkName] == "string" ? Je(Ue(m2.version), t.compat[m2.sdkName]) : !!t.compat[m2.sdkName] : true;
}
function jn(t) {
  var s;
  let e = (s = t == null ? void 0 : t.extensions) != null ? s : [], n = {}, r = [];
  if (Array.isArray(e) ? e.forEach((o2) => {
    ft(o2) ? (o2.init(this), (o2.name || o2.name !== S.Anonymous) && (this[o2.name] = o2), o2 instanceof S.Internal && (te(o2.config) || (n[o2.name] = o2.config))) : r.push(o2);
  }) : Object.keys(e).forEach((o2) => {
    if (ft(e[o2])) {
      e[o2].init(this);
      let a2 = e[o2];
      this[o2] = a2, a2 instanceof S.Internal && (te(a2.config) || (n[e[o2].name] = a2.config));
    } else
      r.push(e[o2]);
  }), r.length)
    throw Ve(r);
  return n;
}
var V = class {
  constructor(e, n) {
    this.apiKey = e;
    var a2;
    if (!e)
      throw Xe();
    m2.platform === "react-native" && (n == null ? void 0 : n.endpoint) && Ze().log();
    let { defaultEndpoint: r, version: s } = m2;
    this.testMode = !!(n == null ? void 0 : n.testMode), this.endpoint = xe((a2 = n == null ? void 0 : n.endpoint) != null ? a2 : r).origin, this.auth = new ye(this), this.user = new Te(this), this.rpcProvider = new ve(this);
    let o2 = jn.call(this, n);
    this.parameters = Q({ API_KEY: this.apiKey, DOMAIN_ORIGIN: window.location ? window.location.origin : "", ETH_NETWORK: n == null ? void 0 : n.network, host: xe(this.endpoint).host, sdk: We[m2.sdkName], version: s, ext: te(o2) ? void 0 : o2, locale: (n == null ? void 0 : n.locale) || "en_US" });
  }
  get overlay() {
    if (!V.__overlays__.has(this.parameters)) {
      let e = new m2.ViewController(this.endpoint, this.parameters);
      e.init(), V.__overlays__.set(this.parameters, e);
    }
    return V.__overlays__.get(this.parameters);
  }
  preload() {
    return I(this, null, function* () {
      yield this.overlay.ready;
    });
  }
};
var Pe = V;
Pe.__overlays__ = /* @__PURE__ */ new Map();
function Fn(t, e) {
  return e && Array.isArray(t) ? t.find((n) => n.id === e) : t;
}
function Wn(t, e) {
  var s;
  let n = (s = e.data.response) == null ? void 0 : s.id, r = Fn(t, n);
  if (n && r) {
    let o2 = new O(r).applyResult(e.data.response.result).applyError(e.data.response.error);
    return { id: n, response: o2 };
  }
  return {};
}
function Xn(t, e) {
  return I(this, null, function* () {
    let n = yield _("rt"), r;
    if (m2.platform === "web")
      try {
        r = yield pt();
      } catch (s) {
        console.error("webcrypto error", s);
      }
    return r ? n ? { msgType: t, payload: e, jwt: r, rt: n } : { msgType: t, payload: e, jwt: r } : { msgType: t, payload: e };
  });
}
function Bn(t) {
  return I(this, null, function* () {
    !t.data.rt || (yield q("rt", t.data.rt));
  });
}
var yt = class {
  constructor(e, n) {
    this.endpoint = e;
    this.parameters = n;
    this.messageHandlers = /* @__PURE__ */ new Set();
    this.ready = this.waitForReady(), this.listen();
  }
  post(e, n) {
    return I(this, null, function* () {
      return fe((r) => I(this, null, function* () {
        yield this.ready;
        let s = [], o2 = Array.isArray(n) ? n.map((p2) => p2.id) : [], a2 = yield Xn(`${e}-${this.parameters}`, n);
        yield this._post(a2);
        let i = (p2) => (l2) => {
          let { id: u2, response: v } = Wn(n, l2);
          Bn(l2), u2 && v && Array.isArray(n) && o2.includes(u2) ? (s.push(v), s.length === n.length && (p2(), r(s))) : u2 && v && !Array.isArray(n) && u2 === n.id && (p2(), r(v));
        }, c = this.on(o.MAGIC_HANDLE_RESPONSE, i(() => c()));
      }));
    });
  }
  on(e, n) {
    let r = n.bind(window), s = (o2) => {
      o2.data.msgType === `${e}-${this.parameters}` && r(o2);
    };
    return this.messageHandlers.add(s), () => this.messageHandlers.delete(s);
  }
  waitForReady() {
    return new Promise((e) => {
      this.on(o.MAGIC_OVERLAY_READY, () => e());
    });
  }
  listen() {
    this.on(o.MAGIC_HIDE_OVERLAY, () => {
      this.hideOverlay();
    }), this.on(o.MAGIC_SHOW_OVERLAY, () => {
      this.showOverlay();
    });
  }
};

// node_modules/@magic-sdk/commons/dist/es/index.js
init_define_process_env();

// node_modules/magic-sdk/dist/es/index.js
var Zr = Object.create;
var De2 = Object.defineProperty;
var qr = Object.getOwnPropertyDescriptor;
var kr = Object.getOwnPropertyNames;
var et2 = Object.getPrototypeOf;
var rt2 = Object.prototype.hasOwnProperty;
var tt = (p2) => De2(p2, "__esModule", { value: true });
var ve2 = ((p2) => typeof __require != "undefined" ? __require : typeof Proxy != "undefined" ? new Proxy(p2, { get: (g2, O2) => (typeof __require != "undefined" ? __require : g2)[O2] }) : p2)(function(p2) {
  if (typeof __require != "undefined")
    return __require.apply(this, arguments);
  throw new Error('Dynamic require of "' + p2 + '" is not supported');
});
var $e2 = (p2, g2) => () => (g2 || p2((g2 = { exports: {} }).exports, g2), g2.exports);
var nt2 = (p2, g2, O2, L2) => {
  if (g2 && typeof g2 == "object" || typeof g2 == "function")
    for (let M of kr(g2))
      !rt2.call(p2, M) && (O2 || M !== "default") && De2(p2, M, { get: () => g2[M], enumerable: !(L2 = qr(g2, M)) || L2.enumerable });
  return p2;
};
var Ze2 = (p2, g2) => nt2(tt(De2(p2 != null ? Zr(et2(p2)) : {}, "default", !g2 && p2 && p2.__esModule ? { get: () => p2.default, enumerable: true } : { value: p2, enumerable: true })), p2);
var se = (p2, g2, O2) => new Promise((L2, M) => {
  var Q2 = (S2) => {
    try {
      Y2(O2.next(S2));
    } catch (P2) {
      M(P2);
    }
  }, C2 = (S2) => {
    try {
      Y2(O2.throw(S2));
    } catch (P2) {
      M(P2);
    }
  }, Y2 = (S2) => S2.done ? L2(S2.value) : Promise.resolve(S2.value).then(Q2, C2);
  Y2((O2 = O2.apply(p2, g2)).next());
});
var ke2 = $e2((qe2, Ne2) => {
  (function(p2) {
    if (typeof qe2 == "object" && typeof Ne2 != "undefined")
      Ne2.exports = p2();
    else if (typeof define == "function" && define.amd)
      define([], p2);
    else {
      var g2;
      typeof window != "undefined" ? g2 = window : typeof global != "undefined" ? g2 = global : typeof self != "undefined" ? g2 = self : g2 = this, g2.localforage = p2();
    }
  })(function() {
    var p2, g2, O2;
    return function L2(M, Q2, C2) {
      function Y2(K2, Z2) {
        if (!Q2[K2]) {
          if (!M[K2]) {
            var m3 = typeof ve2 == "function" && ve2;
            if (!Z2 && m3)
              return m3(K2, true);
            if (S2)
              return S2(K2, true);
            var w2 = new Error("Cannot find module '" + K2 + "'");
            throw w2.code = "MODULE_NOT_FOUND", w2;
          }
          var N2 = Q2[K2] = { exports: {} };
          M[K2][0].call(N2.exports, function(z2) {
            var q2 = M[K2][1][z2];
            return Y2(q2 || z2);
          }, N2, N2.exports, L2, M, Q2, C2);
        }
        return Q2[K2].exports;
      }
      for (var S2 = typeof ve2 == "function" && ve2, P2 = 0; P2 < C2.length; P2++)
        Y2(C2[P2]);
      return Y2;
    }({ 1: [function(L2, M, Q2) {
      (function(C2) {
        "use strict";
        var Y2 = C2.MutationObserver || C2.WebKitMutationObserver, S2;
        if (Y2) {
          var P2 = 0, K2 = new Y2(z2), Z2 = C2.document.createTextNode("");
          K2.observe(Z2, { characterData: true }), S2 = function() {
            Z2.data = P2 = ++P2 % 2;
          };
        } else if (!C2.setImmediate && typeof C2.MessageChannel != "undefined") {
          var m3 = new C2.MessageChannel();
          m3.port1.onmessage = z2, S2 = function() {
            m3.port2.postMessage(0);
          };
        } else
          "document" in C2 && "onreadystatechange" in C2.document.createElement("script") ? S2 = function() {
            var F2 = C2.document.createElement("script");
            F2.onreadystatechange = function() {
              z2(), F2.onreadystatechange = null, F2.parentNode.removeChild(F2), F2 = null;
            }, C2.document.documentElement.appendChild(F2);
          } : S2 = function() {
            setTimeout(z2, 0);
          };
        var w2, N2 = [];
        function z2() {
          w2 = true;
          for (var F2, k, U2 = N2.length; U2; ) {
            for (k = N2, N2 = [], F2 = -1; ++F2 < U2; )
              k[F2]();
            U2 = N2.length;
          }
          w2 = false;
        }
        M.exports = q2;
        function q2(F2) {
          N2.push(F2) === 1 && !w2 && S2();
        }
      }).call(this, typeof global != "undefined" ? global : typeof self != "undefined" ? self : typeof window != "undefined" ? window : {});
    }, {}], 2: [function(L2, M, Q2) {
      "use strict";
      var C2 = L2(1);
      function Y2() {
      }
      var S2 = {}, P2 = ["REJECTED"], K2 = ["FULFILLED"], Z2 = ["PENDING"];
      M.exports = m3;
      function m3(h2) {
        if (typeof h2 != "function")
          throw new TypeError("resolver must be a function");
        this.state = Z2, this.queue = [], this.outcome = void 0, h2 !== Y2 && q2(this, h2);
      }
      m3.prototype.catch = function(h2) {
        return this.then(null, h2);
      }, m3.prototype.then = function(h2, R2) {
        if (typeof h2 != "function" && this.state === K2 || typeof R2 != "function" && this.state === P2)
          return this;
        var I2 = new this.constructor(Y2);
        if (this.state !== Z2) {
          var B = this.state === K2 ? h2 : R2;
          N2(I2, B, this.outcome);
        } else
          this.queue.push(new w2(I2, h2, R2));
        return I2;
      };
      function w2(h2, R2, I2) {
        this.promise = h2, typeof R2 == "function" && (this.onFulfilled = R2, this.callFulfilled = this.otherCallFulfilled), typeof I2 == "function" && (this.onRejected = I2, this.callRejected = this.otherCallRejected);
      }
      w2.prototype.callFulfilled = function(h2) {
        S2.resolve(this.promise, h2);
      }, w2.prototype.otherCallFulfilled = function(h2) {
        N2(this.promise, this.onFulfilled, h2);
      }, w2.prototype.callRejected = function(h2) {
        S2.reject(this.promise, h2);
      }, w2.prototype.otherCallRejected = function(h2) {
        N2(this.promise, this.onRejected, h2);
      };
      function N2(h2, R2, I2) {
        C2(function() {
          var B;
          try {
            B = R2(I2);
          } catch (H2) {
            return S2.reject(h2, H2);
          }
          B === h2 ? S2.reject(h2, new TypeError("Cannot resolve promise with itself")) : S2.resolve(h2, B);
        });
      }
      S2.resolve = function(h2, R2) {
        var I2 = F2(z2, R2);
        if (I2.status === "error")
          return S2.reject(h2, I2.value);
        var B = I2.value;
        if (B)
          q2(h2, B);
        else {
          h2.state = K2, h2.outcome = R2;
          for (var H2 = -1, j2 = h2.queue.length; ++H2 < j2; )
            h2.queue[H2].callFulfilled(R2);
        }
        return h2;
      }, S2.reject = function(h2, R2) {
        h2.state = P2, h2.outcome = R2;
        for (var I2 = -1, B = h2.queue.length; ++I2 < B; )
          h2.queue[I2].callRejected(R2);
        return h2;
      };
      function z2(h2) {
        var R2 = h2 && h2.then;
        if (h2 && (typeof h2 == "object" || typeof h2 == "function") && typeof R2 == "function")
          return function() {
            R2.apply(h2, arguments);
          };
      }
      function q2(h2, R2) {
        var I2 = false;
        function B($2) {
          I2 || (I2 = true, S2.reject(h2, $2));
        }
        function H2($2) {
          I2 || (I2 = true, S2.resolve(h2, $2));
        }
        function j2() {
          R2(H2, B);
        }
        var J = F2(j2);
        J.status === "error" && B(J.value);
      }
      function F2(h2, R2) {
        var I2 = {};
        try {
          I2.value = h2(R2), I2.status = "success";
        } catch (B) {
          I2.status = "error", I2.value = B;
        }
        return I2;
      }
      m3.resolve = k;
      function k(h2) {
        return h2 instanceof this ? h2 : S2.resolve(new this(Y2), h2);
      }
      m3.reject = U2;
      function U2(h2) {
        var R2 = new this(Y2);
        return S2.reject(R2, h2);
      }
      m3.all = ae2;
      function ae2(h2) {
        var R2 = this;
        if (Object.prototype.toString.call(h2) !== "[object Array]")
          return this.reject(new TypeError("must be an array"));
        var I2 = h2.length, B = false;
        if (!I2)
          return this.resolve([]);
        for (var H2 = new Array(I2), j2 = 0, J = -1, $2 = new this(Y2); ++J < I2; )
          ee2(h2[J], J);
        return $2;
        function ee2(oe2, a2) {
          R2.resolve(oe2).then(s, function(v) {
            B || (B = true, S2.reject($2, v));
          });
          function s(v) {
            H2[a2] = v, ++j2 === I2 && !B && (B = true, S2.resolve($2, H2));
          }
        }
      }
      m3.race = re2;
      function re2(h2) {
        var R2 = this;
        if (Object.prototype.toString.call(h2) !== "[object Array]")
          return this.reject(new TypeError("must be an array"));
        var I2 = h2.length, B = false;
        if (!I2)
          return this.resolve([]);
        for (var H2 = -1, j2 = new this(Y2); ++H2 < I2; )
          J(h2[H2]);
        return j2;
        function J($2) {
          R2.resolve($2).then(function(ee2) {
            B || (B = true, S2.resolve(j2, ee2));
          }, function(ee2) {
            B || (B = true, S2.reject(j2, ee2));
          });
        }
      }
    }, { "1": 1 }], 3: [function(L2, M, Q2) {
      (function(C2) {
        "use strict";
        typeof C2.Promise != "function" && (C2.Promise = L2(2));
      }).call(this, typeof global != "undefined" ? global : typeof self != "undefined" ? self : typeof window != "undefined" ? window : {});
    }, { "2": 2 }], 4: [function(L2, M, Q2) {
      "use strict";
      var C2 = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
        return typeof e;
      } : function(e) {
        return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
      };
      function Y2(e, t) {
        if (!(e instanceof t))
          throw new TypeError("Cannot call a class as a function");
      }
      function S2() {
        try {
          if (typeof indexedDB != "undefined")
            return indexedDB;
          if (typeof webkitIndexedDB != "undefined")
            return webkitIndexedDB;
          if (typeof mozIndexedDB != "undefined")
            return mozIndexedDB;
          if (typeof OIndexedDB != "undefined")
            return OIndexedDB;
          if (typeof msIndexedDB != "undefined")
            return msIndexedDB;
        } catch {
          return;
        }
      }
      var P2 = S2();
      function K2() {
        try {
          if (!P2 || !P2.open)
            return false;
          var e = typeof openDatabase != "undefined" && /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/BlackBerry/.test(navigator.platform), t = typeof fetch == "function" && fetch.toString().indexOf("[native code") !== -1;
          return (!e || t) && typeof indexedDB != "undefined" && typeof IDBKeyRange != "undefined";
        } catch {
          return false;
        }
      }
      function Z2(e, t) {
        e = e || [], t = t || {};
        try {
          return new Blob(e, t);
        } catch (n) {
          if (n.name !== "TypeError")
            throw n;
          for (var r = typeof BlobBuilder != "undefined" ? BlobBuilder : typeof MSBlobBuilder != "undefined" ? MSBlobBuilder : typeof MozBlobBuilder != "undefined" ? MozBlobBuilder : WebKitBlobBuilder, o2 = new r(), i = 0; i < e.length; i += 1)
            o2.append(e[i]);
          return o2.getBlob(t.type);
        }
      }
      typeof Promise == "undefined" && L2(3);
      var m3 = Promise;
      function w2(e, t) {
        t && e.then(function(r) {
          t(null, r);
        }, function(r) {
          t(r);
        });
      }
      function N2(e, t, r) {
        typeof t == "function" && e.then(t), typeof r == "function" && e.catch(r);
      }
      function z2(e) {
        return typeof e != "string" && (console.warn(e + " used as a key, but it is not a string."), e = String(e)), e;
      }
      function q2() {
        if (arguments.length && typeof arguments[arguments.length - 1] == "function")
          return arguments[arguments.length - 1];
      }
      var F2 = "local-forage-detect-blob-support", k = void 0, U2 = {}, ae2 = Object.prototype.toString, re2 = "readonly", h2 = "readwrite";
      function R2(e) {
        for (var t = e.length, r = new ArrayBuffer(t), o2 = new Uint8Array(r), i = 0; i < t; i++)
          o2[i] = e.charCodeAt(i);
        return r;
      }
      function I2(e) {
        return new m3(function(t) {
          var r = e.transaction(F2, h2), o2 = Z2([""]);
          r.objectStore(F2).put(o2, "key"), r.onabort = function(i) {
            i.preventDefault(), i.stopPropagation(), t(false);
          }, r.oncomplete = function() {
            var i = navigator.userAgent.match(/Chrome\/(\d+)/), n = navigator.userAgent.match(/Edge\//);
            t(n || !i || parseInt(i[1], 10) >= 43);
          };
        }).catch(function() {
          return false;
        });
      }
      function B(e) {
        return typeof k == "boolean" ? m3.resolve(k) : I2(e).then(function(t) {
          return k = t, k;
        });
      }
      function H2(e) {
        var t = U2[e.name], r = {};
        r.promise = new m3(function(o2, i) {
          r.resolve = o2, r.reject = i;
        }), t.deferredOperations.push(r), t.dbReady ? t.dbReady = t.dbReady.then(function() {
          return r.promise;
        }) : t.dbReady = r.promise;
      }
      function j2(e) {
        var t = U2[e.name], r = t.deferredOperations.pop();
        if (r)
          return r.resolve(), r.promise;
      }
      function J(e, t) {
        var r = U2[e.name], o2 = r.deferredOperations.pop();
        if (o2)
          return o2.reject(t), o2.promise;
      }
      function $2(e, t) {
        return new m3(function(r, o2) {
          if (U2[e.name] = U2[e.name] || G2(), e.db)
            if (t)
              H2(e), e.db.close();
            else
              return r(e.db);
          var i = [e.name];
          t && i.push(e.version);
          var n = P2.open.apply(P2, i);
          t && (n.onupgradeneeded = function(f2) {
            var u2 = n.result;
            try {
              u2.createObjectStore(e.storeName), f2.oldVersion <= 1 && u2.createObjectStore(F2);
            } catch (c) {
              if (c.name === "ConstraintError")
                console.warn('The database "' + e.name + '" has been upgraded from version ' + f2.oldVersion + " to version " + f2.newVersion + ', but the storage "' + e.storeName + '" already exists.');
              else
                throw c;
            }
          }), n.onerror = function(f2) {
            f2.preventDefault(), o2(n.error);
          }, n.onsuccess = function() {
            r(n.result), j2(e);
          };
        });
      }
      function ee2(e) {
        return $2(e, false);
      }
      function oe2(e) {
        return $2(e, true);
      }
      function a2(e, t) {
        if (!e.db)
          return true;
        var r = !e.db.objectStoreNames.contains(e.storeName), o2 = e.version < e.db.version, i = e.version > e.db.version;
        if (o2 && (e.version !== t && console.warn('The database "' + e.name + `" can't be downgraded from version ` + e.db.version + " to version " + e.version + "."), e.version = e.db.version), i || r) {
          if (r) {
            var n = e.db.version + 1;
            n > e.version && (e.version = n);
          }
          return true;
        }
        return false;
      }
      function s(e) {
        return new m3(function(t, r) {
          var o2 = new FileReader();
          o2.onerror = r, o2.onloadend = function(i) {
            var n = btoa(i.target.result || "");
            t({ __local_forage_encoded_blob: true, data: n, type: e.type });
          }, o2.readAsBinaryString(e);
        });
      }
      function v(e) {
        var t = R2(atob(e.data));
        return Z2([t], { type: e.type });
      }
      function b2(e) {
        return e && e.__local_forage_encoded_blob;
      }
      function _2(e) {
        var t = this, r = t._initReady().then(function() {
          var o2 = U2[t._dbInfo.name];
          if (o2 && o2.dbReady)
            return o2.dbReady;
        });
        return N2(r, e, e), r;
      }
      function E2(e) {
        H2(e);
        for (var t = U2[e.name], r = t.forages, o2 = 0; o2 < r.length; o2++) {
          var i = r[o2];
          i._dbInfo.db && (i._dbInfo.db.close(), i._dbInfo.db = null);
        }
        return e.db = null, ee2(e).then(function(n) {
          return e.db = n, a2(e) ? oe2(e) : n;
        }).then(function(n) {
          e.db = t.db = n;
          for (var f2 = 0; f2 < r.length; f2++)
            r[f2]._dbInfo.db = n;
        }).catch(function(n) {
          throw J(e, n), n;
        });
      }
      function D2(e, t, r, o2) {
        o2 === void 0 && (o2 = 1);
        try {
          var i = e.db.transaction(e.storeName, t);
          r(null, i);
        } catch (n) {
          if (o2 > 0 && (!e.db || n.name === "InvalidStateError" || n.name === "NotFoundError"))
            return m3.resolve().then(function() {
              if (!e.db || n.name === "NotFoundError" && !e.db.objectStoreNames.contains(e.storeName) && e.version <= e.db.version)
                return e.db && (e.version = e.db.version + 1), oe2(e);
            }).then(function() {
              return E2(e).then(function() {
                D2(e, t, r, o2 - 1);
              });
            }).catch(r);
          r(n);
        }
      }
      function G2() {
        return { forages: [], db: null, dbReady: null, deferredOperations: [] };
      }
      function fe2(e) {
        var t = this, r = { db: null };
        if (e)
          for (var o2 in e)
            r[o2] = e[o2];
        var i = U2[r.name];
        i || (i = G2(), U2[r.name] = i), i.forages.push(t), t._initReady || (t._initReady = t.ready, t.ready = _2);
        var n = [];
        function f2() {
          return m3.resolve();
        }
        for (var u2 = 0; u2 < i.forages.length; u2++) {
          var c = i.forages[u2];
          c !== t && n.push(c._initReady().catch(f2));
        }
        var l2 = i.forages.slice(0);
        return m3.all(n).then(function() {
          return r.db = i.db, ee2(r);
        }).then(function(d2) {
          return r.db = d2, a2(r, t._defaultConfig.version) ? oe2(r) : d2;
        }).then(function(d2) {
          r.db = i.db = d2, t._dbInfo = r;
          for (var y2 = 0; y2 < l2.length; y2++) {
            var A2 = l2[y2];
            A2 !== t && (A2._dbInfo.db = r.db, A2._dbInfo.version = r.version);
          }
        });
      }
      function ie2(e, t) {
        var r = this;
        e = z2(e);
        var o2 = new m3(function(i, n) {
          r.ready().then(function() {
            D2(r._dbInfo, re2, function(f2, u2) {
              if (f2)
                return n(f2);
              try {
                var c = u2.objectStore(r._dbInfo.storeName), l2 = c.get(e);
                l2.onsuccess = function() {
                  var d2 = l2.result;
                  d2 === void 0 && (d2 = null), b2(d2) && (d2 = v(d2)), i(d2);
                }, l2.onerror = function() {
                  n(l2.error);
                };
              } catch (d2) {
                n(d2);
              }
            });
          }).catch(n);
        });
        return w2(o2, t), o2;
      }
      function ce2(e, t) {
        var r = this, o2 = new m3(function(i, n) {
          r.ready().then(function() {
            D2(r._dbInfo, re2, function(f2, u2) {
              if (f2)
                return n(f2);
              try {
                var c = u2.objectStore(r._dbInfo.storeName), l2 = c.openCursor(), d2 = 1;
                l2.onsuccess = function() {
                  var y2 = l2.result;
                  if (y2) {
                    var A2 = y2.value;
                    b2(A2) && (A2 = v(A2));
                    var T = e(A2, y2.key, d2++);
                    T !== void 0 ? i(T) : y2.continue();
                  } else
                    i();
                }, l2.onerror = function() {
                  n(l2.error);
                };
              } catch (y2) {
                n(y2);
              }
            });
          }).catch(n);
        });
        return w2(o2, t), o2;
      }
      function nr(e, t, r) {
        var o2 = this;
        e = z2(e);
        var i = new m3(function(n, f2) {
          var u2;
          o2.ready().then(function() {
            return u2 = o2._dbInfo, ae2.call(t) === "[object Blob]" ? B(u2.db).then(function(c) {
              return c ? t : s(t);
            }) : t;
          }).then(function(c) {
            D2(o2._dbInfo, h2, function(l2, d2) {
              if (l2)
                return f2(l2);
              try {
                var y2 = d2.objectStore(o2._dbInfo.storeName);
                c === null && (c = void 0);
                var A2 = y2.put(c, e);
                d2.oncomplete = function() {
                  c === void 0 && (c = null), n(c);
                }, d2.onabort = d2.onerror = function() {
                  var T = A2.error ? A2.error : A2.transaction.error;
                  f2(T);
                };
              } catch (T) {
                f2(T);
              }
            });
          }).catch(f2);
        });
        return w2(i, r), i;
      }
      function or(e, t) {
        var r = this;
        e = z2(e);
        var o2 = new m3(function(i, n) {
          r.ready().then(function() {
            D2(r._dbInfo, h2, function(f2, u2) {
              if (f2)
                return n(f2);
              try {
                var c = u2.objectStore(r._dbInfo.storeName), l2 = c.delete(e);
                u2.oncomplete = function() {
                  i();
                }, u2.onerror = function() {
                  n(l2.error);
                }, u2.onabort = function() {
                  var d2 = l2.error ? l2.error : l2.transaction.error;
                  n(d2);
                };
              } catch (d2) {
                n(d2);
              }
            });
          }).catch(n);
        });
        return w2(o2, t), o2;
      }
      function ir(e) {
        var t = this, r = new m3(function(o2, i) {
          t.ready().then(function() {
            D2(t._dbInfo, h2, function(n, f2) {
              if (n)
                return i(n);
              try {
                var u2 = f2.objectStore(t._dbInfo.storeName), c = u2.clear();
                f2.oncomplete = function() {
                  o2();
                }, f2.onabort = f2.onerror = function() {
                  var l2 = c.error ? c.error : c.transaction.error;
                  i(l2);
                };
              } catch (l2) {
                i(l2);
              }
            });
          }).catch(i);
        });
        return w2(r, e), r;
      }
      function ar(e) {
        var t = this, r = new m3(function(o2, i) {
          t.ready().then(function() {
            D2(t._dbInfo, re2, function(n, f2) {
              if (n)
                return i(n);
              try {
                var u2 = f2.objectStore(t._dbInfo.storeName), c = u2.count();
                c.onsuccess = function() {
                  o2(c.result);
                }, c.onerror = function() {
                  i(c.error);
                };
              } catch (l2) {
                i(l2);
              }
            });
          }).catch(i);
        });
        return w2(r, e), r;
      }
      function fr(e, t) {
        var r = this, o2 = new m3(function(i, n) {
          if (e < 0) {
            i(null);
            return;
          }
          r.ready().then(function() {
            D2(r._dbInfo, re2, function(f2, u2) {
              if (f2)
                return n(f2);
              try {
                var c = u2.objectStore(r._dbInfo.storeName), l2 = false, d2 = c.openKeyCursor();
                d2.onsuccess = function() {
                  var y2 = d2.result;
                  if (!y2) {
                    i(null);
                    return;
                  }
                  e === 0 || l2 ? i(y2.key) : (l2 = true, y2.advance(e));
                }, d2.onerror = function() {
                  n(d2.error);
                };
              } catch (y2) {
                n(y2);
              }
            });
          }).catch(n);
        });
        return w2(o2, t), o2;
      }
      function ur(e) {
        var t = this, r = new m3(function(o2, i) {
          t.ready().then(function() {
            D2(t._dbInfo, re2, function(n, f2) {
              if (n)
                return i(n);
              try {
                var u2 = f2.objectStore(t._dbInfo.storeName), c = u2.openKeyCursor(), l2 = [];
                c.onsuccess = function() {
                  var d2 = c.result;
                  if (!d2) {
                    o2(l2);
                    return;
                  }
                  l2.push(d2.key), d2.continue();
                }, c.onerror = function() {
                  i(c.error);
                };
              } catch (d2) {
                i(d2);
              }
            });
          }).catch(i);
        });
        return w2(r, e), r;
      }
      function sr(e, t) {
        t = q2.apply(this, arguments);
        var r = this.config();
        e = typeof e != "function" && e || {}, e.name || (e.name = e.name || r.name, e.storeName = e.storeName || r.storeName);
        var o2 = this, i;
        if (!e.name)
          i = m3.reject("Invalid arguments");
        else {
          var n = e.name === r.name && o2._dbInfo.db, f2 = n ? m3.resolve(o2._dbInfo.db) : ee2(e).then(function(u2) {
            var c = U2[e.name], l2 = c.forages;
            c.db = u2;
            for (var d2 = 0; d2 < l2.length; d2++)
              l2[d2]._dbInfo.db = u2;
            return u2;
          });
          e.storeName ? i = f2.then(function(u2) {
            if (!!u2.objectStoreNames.contains(e.storeName)) {
              var c = u2.version + 1;
              H2(e);
              var l2 = U2[e.name], d2 = l2.forages;
              u2.close();
              for (var y2 = 0; y2 < d2.length; y2++) {
                var A2 = d2[y2];
                A2._dbInfo.db = null, A2._dbInfo.version = c;
              }
              var T = new m3(function(x, V2) {
                var W2 = P2.open(e.name, c);
                W2.onerror = function(X2) {
                  var de2 = W2.result;
                  de2.close(), V2(X2);
                }, W2.onupgradeneeded = function() {
                  var X2 = W2.result;
                  X2.deleteObjectStore(e.storeName);
                }, W2.onsuccess = function() {
                  var X2 = W2.result;
                  X2.close(), x(X2);
                };
              });
              return T.then(function(x) {
                l2.db = x;
                for (var V2 = 0; V2 < d2.length; V2++) {
                  var W2 = d2[V2];
                  W2._dbInfo.db = x, j2(W2._dbInfo);
                }
              }).catch(function(x) {
                throw (J(e, x) || m3.resolve()).catch(function() {
                }), x;
              });
            }
          }) : i = f2.then(function(u2) {
            H2(e);
            var c = U2[e.name], l2 = c.forages;
            u2.close();
            for (var d2 = 0; d2 < l2.length; d2++) {
              var y2 = l2[d2];
              y2._dbInfo.db = null;
            }
            var A2 = new m3(function(T, x) {
              var V2 = P2.deleteDatabase(e.name);
              V2.onerror = V2.onblocked = function(W2) {
                var X2 = V2.result;
                X2 && X2.close(), x(W2);
              }, V2.onsuccess = function() {
                var W2 = V2.result;
                W2 && W2.close(), T(W2);
              };
            });
            return A2.then(function(T) {
              c.db = T;
              for (var x = 0; x < l2.length; x++) {
                var V2 = l2[x];
                j2(V2._dbInfo);
              }
            }).catch(function(T) {
              throw (J(e, T) || m3.resolve()).catch(function() {
              }), T;
            });
          });
        }
        return w2(i, t), i;
      }
      var cr2 = { _driver: "asyncStorage", _initStorage: fe2, _support: K2(), iterate: ce2, getItem: ie2, setItem: nr, removeItem: or, clear: ir, length: ar, key: fr, keys: ur, dropInstance: sr };
      function lr2() {
        return typeof openDatabase == "function";
      }
      var te2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", dr = "~~local_forage_type~", xe2 = /^~~local_forage_type~([^~]+)~/, he = "__lfsc__:", ge2 = he.length, be2 = "arbf", _e2 = "blob", Oe2 = "si08", Ce2 = "ui08", Le2 = "uic8", Pe2 = "si16", Me2 = "si32", Fe2 = "ur16", Ue2 = "ui32", Ye2 = "fl32", ze2 = "fl64", We2 = ge2 + be2.length, Ke2 = Object.prototype.toString;
      function He2(e) {
        var t = e.length * 0.75, r = e.length, o2, i = 0, n, f2, u2, c;
        e[e.length - 1] === "=" && (t--, e[e.length - 2] === "=" && t--);
        var l2 = new ArrayBuffer(t), d2 = new Uint8Array(l2);
        for (o2 = 0; o2 < r; o2 += 4)
          n = te2.indexOf(e[o2]), f2 = te2.indexOf(e[o2 + 1]), u2 = te2.indexOf(e[o2 + 2]), c = te2.indexOf(e[o2 + 3]), d2[i++] = n << 2 | f2 >> 4, d2[i++] = (f2 & 15) << 4 | u2 >> 2, d2[i++] = (u2 & 3) << 6 | c & 63;
        return l2;
      }
      function we2(e) {
        var t = new Uint8Array(e), r = "", o2;
        for (o2 = 0; o2 < t.length; o2 += 3)
          r += te2[t[o2] >> 2], r += te2[(t[o2] & 3) << 4 | t[o2 + 1] >> 4], r += te2[(t[o2 + 1] & 15) << 2 | t[o2 + 2] >> 6], r += te2[t[o2 + 2] & 63];
        return t.length % 3 === 2 ? r = r.substring(0, r.length - 1) + "=" : t.length % 3 === 1 && (r = r.substring(0, r.length - 2) + "=="), r;
      }
      function vr(e, t) {
        var r = "";
        if (e && (r = Ke2.call(e)), e && (r === "[object ArrayBuffer]" || e.buffer && Ke2.call(e.buffer) === "[object ArrayBuffer]")) {
          var o2, i = he;
          e instanceof ArrayBuffer ? (o2 = e, i += be2) : (o2 = e.buffer, r === "[object Int8Array]" ? i += Oe2 : r === "[object Uint8Array]" ? i += Ce2 : r === "[object Uint8ClampedArray]" ? i += Le2 : r === "[object Int16Array]" ? i += Pe2 : r === "[object Uint16Array]" ? i += Fe2 : r === "[object Int32Array]" ? i += Me2 : r === "[object Uint32Array]" ? i += Ue2 : r === "[object Float32Array]" ? i += Ye2 : r === "[object Float64Array]" ? i += ze2 : t(new Error("Failed to get type for BinaryArray"))), t(i + we2(o2));
        } else if (r === "[object Blob]") {
          var n = new FileReader();
          n.onload = function() {
            var f2 = dr + e.type + "~" + we2(this.result);
            t(he + _e2 + f2);
          }, n.readAsArrayBuffer(e);
        } else
          try {
            t(JSON.stringify(e));
          } catch (f2) {
            console.error("Couldn't convert value into a JSON string: ", e), t(null, f2);
          }
      }
      function hr(e) {
        if (e.substring(0, ge2) !== he)
          return JSON.parse(e);
        var t = e.substring(We2), r = e.substring(ge2, We2), o2;
        if (r === _e2 && xe2.test(t)) {
          var i = t.match(xe2);
          o2 = i[1], t = t.substring(i[0].length);
        }
        var n = He2(t);
        switch (r) {
          case be2:
            return n;
          case _e2:
            return Z2([n], { type: o2 });
          case Oe2:
            return new Int8Array(n);
          case Ce2:
            return new Uint8Array(n);
          case Le2:
            return new Uint8ClampedArray(n);
          case Pe2:
            return new Int16Array(n);
          case Fe2:
            return new Uint16Array(n);
          case Me2:
            return new Int32Array(n);
          case Ue2:
            return new Uint32Array(n);
          case Ye2:
            return new Float32Array(n);
          case ze2:
            return new Float64Array(n);
          default:
            throw new Error("Unkown type: " + r);
        }
      }
      var Ee2 = { serialize: vr, deserialize: hr, stringToBuffer: He2, bufferToString: we2 };
      function Ve2(e, t, r, o2) {
        e.executeSql("CREATE TABLE IF NOT EXISTS " + t.storeName + " (id INTEGER PRIMARY KEY, key unique, value)", [], r, o2);
      }
      function mr(e) {
        var t = this, r = { db: null };
        if (e)
          for (var o2 in e)
            r[o2] = typeof e[o2] != "string" ? e[o2].toString() : e[o2];
        var i = new m3(function(n, f2) {
          try {
            r.db = openDatabase(r.name, String(r.version), r.description, r.size);
          } catch (u2) {
            return f2(u2);
          }
          r.db.transaction(function(u2) {
            Ve2(u2, r, function() {
              t._dbInfo = r, n();
            }, function(c, l2) {
              f2(l2);
            });
          }, f2);
        });
        return r.serializer = Ee2, i;
      }
      function ne(e, t, r, o2, i, n) {
        e.executeSql(r, o2, i, function(f2, u2) {
          u2.code === u2.SYNTAX_ERR ? f2.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?", [t.storeName], function(c, l2) {
            l2.rows.length ? n(c, u2) : Ve2(c, t, function() {
              c.executeSql(r, o2, i, n);
            }, n);
          }, n) : n(f2, u2);
        }, n);
      }
      function yr(e, t) {
        var r = this;
        e = z2(e);
        var o2 = new m3(function(i, n) {
          r.ready().then(function() {
            var f2 = r._dbInfo;
            f2.db.transaction(function(u2) {
              ne(u2, f2, "SELECT * FROM " + f2.storeName + " WHERE key = ? LIMIT 1", [e], function(c, l2) {
                var d2 = l2.rows.length ? l2.rows.item(0).value : null;
                d2 && (d2 = f2.serializer.deserialize(d2)), i(d2);
              }, function(c, l2) {
                n(l2);
              });
            });
          }).catch(n);
        });
        return w2(o2, t), o2;
      }
      function pr(e, t) {
        var r = this, o2 = new m3(function(i, n) {
          r.ready().then(function() {
            var f2 = r._dbInfo;
            f2.db.transaction(function(u2) {
              ne(u2, f2, "SELECT * FROM " + f2.storeName, [], function(c, l2) {
                for (var d2 = l2.rows, y2 = d2.length, A2 = 0; A2 < y2; A2++) {
                  var T = d2.item(A2), x = T.value;
                  if (x && (x = f2.serializer.deserialize(x)), x = e(x, T.key, A2 + 1), x !== void 0) {
                    i(x);
                    return;
                  }
                }
                i();
              }, function(c, l2) {
                n(l2);
              });
            });
          }).catch(n);
        });
        return w2(o2, t), o2;
      }
      function Ge2(e, t, r, o2) {
        var i = this;
        e = z2(e);
        var n = new m3(function(f2, u2) {
          i.ready().then(function() {
            t === void 0 && (t = null);
            var c = t, l2 = i._dbInfo;
            l2.serializer.serialize(t, function(d2, y2) {
              y2 ? u2(y2) : l2.db.transaction(function(A2) {
                ne(A2, l2, "INSERT OR REPLACE INTO " + l2.storeName + " (key, value) VALUES (?, ?)", [e, d2], function() {
                  f2(c);
                }, function(T, x) {
                  u2(x);
                });
              }, function(A2) {
                if (A2.code === A2.QUOTA_ERR) {
                  if (o2 > 0) {
                    f2(Ge2.apply(i, [e, c, r, o2 - 1]));
                    return;
                  }
                  u2(A2);
                }
              });
            });
          }).catch(u2);
        });
        return w2(n, r), n;
      }
      function gr(e, t, r) {
        return Ge2.apply(this, [e, t, r, 1]);
      }
      function br(e, t) {
        var r = this;
        e = z2(e);
        var o2 = new m3(function(i, n) {
          r.ready().then(function() {
            var f2 = r._dbInfo;
            f2.db.transaction(function(u2) {
              ne(u2, f2, "DELETE FROM " + f2.storeName + " WHERE key = ?", [e], function() {
                i();
              }, function(c, l2) {
                n(l2);
              });
            });
          }).catch(n);
        });
        return w2(o2, t), o2;
      }
      function _r(e) {
        var t = this, r = new m3(function(o2, i) {
          t.ready().then(function() {
            var n = t._dbInfo;
            n.db.transaction(function(f2) {
              ne(f2, n, "DELETE FROM " + n.storeName, [], function() {
                o2();
              }, function(u2, c) {
                i(c);
              });
            });
          }).catch(i);
        });
        return w2(r, e), r;
      }
      function wr(e) {
        var t = this, r = new m3(function(o2, i) {
          t.ready().then(function() {
            var n = t._dbInfo;
            n.db.transaction(function(f2) {
              ne(f2, n, "SELECT COUNT(key) as c FROM " + n.storeName, [], function(u2, c) {
                var l2 = c.rows.item(0).c;
                o2(l2);
              }, function(u2, c) {
                i(c);
              });
            });
          }).catch(i);
        });
        return w2(r, e), r;
      }
      function Er(e, t) {
        var r = this, o2 = new m3(function(i, n) {
          r.ready().then(function() {
            var f2 = r._dbInfo;
            f2.db.transaction(function(u2) {
              ne(u2, f2, "SELECT key FROM " + f2.storeName + " WHERE id = ? LIMIT 1", [e + 1], function(c, l2) {
                var d2 = l2.rows.length ? l2.rows.item(0).key : null;
                i(d2);
              }, function(c, l2) {
                n(l2);
              });
            });
          }).catch(n);
        });
        return w2(o2, t), o2;
      }
      function Ir(e) {
        var t = this, r = new m3(function(o2, i) {
          t.ready().then(function() {
            var n = t._dbInfo;
            n.db.transaction(function(f2) {
              ne(f2, n, "SELECT key FROM " + n.storeName, [], function(u2, c) {
                for (var l2 = [], d2 = 0; d2 < c.rows.length; d2++)
                  l2.push(c.rows.item(d2).key);
                o2(l2);
              }, function(u2, c) {
                i(c);
              });
            });
          }).catch(i);
        });
        return w2(r, e), r;
      }
      function Sr(e) {
        return new m3(function(t, r) {
          e.transaction(function(o2) {
            o2.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'", [], function(i, n) {
              for (var f2 = [], u2 = 0; u2 < n.rows.length; u2++)
                f2.push(n.rows.item(u2).name);
              t({ db: e, storeNames: f2 });
            }, function(i, n) {
              r(n);
            });
          }, function(o2) {
            r(o2);
          });
        });
      }
      function Ar(e, t) {
        t = q2.apply(this, arguments);
        var r = this.config();
        e = typeof e != "function" && e || {}, e.name || (e.name = e.name || r.name, e.storeName = e.storeName || r.storeName);
        var o2 = this, i;
        return e.name ? i = new m3(function(n) {
          var f2;
          e.name === r.name ? f2 = o2._dbInfo.db : f2 = openDatabase(e.name, "", "", 0), e.storeName ? n({ db: f2, storeNames: [e.storeName] }) : n(Sr(f2));
        }).then(function(n) {
          return new m3(function(f2, u2) {
            n.db.transaction(function(c) {
              function l2(T) {
                return new m3(function(x, V2) {
                  c.executeSql("DROP TABLE IF EXISTS " + T, [], function() {
                    x();
                  }, function(W2, X2) {
                    V2(X2);
                  });
                });
              }
              for (var d2 = [], y2 = 0, A2 = n.storeNames.length; y2 < A2; y2++)
                d2.push(l2(n.storeNames[y2]));
              m3.all(d2).then(function() {
                f2();
              }).catch(function(T) {
                u2(T);
              });
            }, function(c) {
              u2(c);
            });
          });
        }) : i = m3.reject("Invalid arguments"), w2(i, t), i;
      }
      var Rr = { _driver: "webSQLStorage", _initStorage: mr, _support: lr2(), iterate: pr, getItem: yr, setItem: gr, removeItem: br, clear: _r, length: wr, key: Er, keys: Ir, dropInstance: Ar };
      function Dr() {
        try {
          return typeof localStorage != "undefined" && "setItem" in localStorage && !!localStorage.setItem;
        } catch {
          return false;
        }
      }
      function je2(e, t) {
        var r = e.name + "/";
        return e.storeName !== t.storeName && (r += e.storeName + "/"), r;
      }
      function Nr() {
        var e = "_localforage_support_test";
        try {
          return localStorage.setItem(e, true), localStorage.removeItem(e), false;
        } catch {
          return true;
        }
      }
      function Tr() {
        return !Nr() || localStorage.length > 0;
      }
      function Br(e) {
        var t = this, r = {};
        if (e)
          for (var o2 in e)
            r[o2] = e[o2];
        return r.keyPrefix = je2(e, t._defaultConfig), Tr() ? (t._dbInfo = r, r.serializer = Ee2, m3.resolve()) : m3.reject();
      }
      function xr(e) {
        var t = this, r = t.ready().then(function() {
          for (var o2 = t._dbInfo.keyPrefix, i = localStorage.length - 1; i >= 0; i--) {
            var n = localStorage.key(i);
            n.indexOf(o2) === 0 && localStorage.removeItem(n);
          }
        });
        return w2(r, e), r;
      }
      function Or(e, t) {
        var r = this;
        e = z2(e);
        var o2 = r.ready().then(function() {
          var i = r._dbInfo, n = localStorage.getItem(i.keyPrefix + e);
          return n && (n = i.serializer.deserialize(n)), n;
        });
        return w2(o2, t), o2;
      }
      function Cr(e, t) {
        var r = this, o2 = r.ready().then(function() {
          for (var i = r._dbInfo, n = i.keyPrefix, f2 = n.length, u2 = localStorage.length, c = 1, l2 = 0; l2 < u2; l2++) {
            var d2 = localStorage.key(l2);
            if (d2.indexOf(n) === 0) {
              var y2 = localStorage.getItem(d2);
              if (y2 && (y2 = i.serializer.deserialize(y2)), y2 = e(y2, d2.substring(f2), c++), y2 !== void 0)
                return y2;
            }
          }
        });
        return w2(o2, t), o2;
      }
      function Lr(e, t) {
        var r = this, o2 = r.ready().then(function() {
          var i = r._dbInfo, n;
          try {
            n = localStorage.key(e);
          } catch {
            n = null;
          }
          return n && (n = n.substring(i.keyPrefix.length)), n;
        });
        return w2(o2, t), o2;
      }
      function Pr(e) {
        var t = this, r = t.ready().then(function() {
          for (var o2 = t._dbInfo, i = localStorage.length, n = [], f2 = 0; f2 < i; f2++) {
            var u2 = localStorage.key(f2);
            u2.indexOf(o2.keyPrefix) === 0 && n.push(u2.substring(o2.keyPrefix.length));
          }
          return n;
        });
        return w2(r, e), r;
      }
      function Mr(e) {
        var t = this, r = t.keys().then(function(o2) {
          return o2.length;
        });
        return w2(r, e), r;
      }
      function Fr(e, t) {
        var r = this;
        e = z2(e);
        var o2 = r.ready().then(function() {
          var i = r._dbInfo;
          localStorage.removeItem(i.keyPrefix + e);
        });
        return w2(o2, t), o2;
      }
      function Ur(e, t, r) {
        var o2 = this;
        e = z2(e);
        var i = o2.ready().then(function() {
          t === void 0 && (t = null);
          var n = t;
          return new m3(function(f2, u2) {
            var c = o2._dbInfo;
            c.serializer.serialize(t, function(l2, d2) {
              if (d2)
                u2(d2);
              else
                try {
                  localStorage.setItem(c.keyPrefix + e, l2), f2(n);
                } catch (y2) {
                  (y2.name === "QuotaExceededError" || y2.name === "NS_ERROR_DOM_QUOTA_REACHED") && u2(y2), u2(y2);
                }
            });
          });
        });
        return w2(i, r), i;
      }
      function Yr(e, t) {
        if (t = q2.apply(this, arguments), e = typeof e != "function" && e || {}, !e.name) {
          var r = this.config();
          e.name = e.name || r.name, e.storeName = e.storeName || r.storeName;
        }
        var o2 = this, i;
        return e.name ? i = new m3(function(n) {
          e.storeName ? n(je2(e, o2._defaultConfig)) : n(e.name + "/");
        }).then(function(n) {
          for (var f2 = localStorage.length - 1; f2 >= 0; f2--) {
            var u2 = localStorage.key(f2);
            u2.indexOf(n) === 0 && localStorage.removeItem(u2);
          }
        }) : i = m3.reject("Invalid arguments"), w2(i, t), i;
      }
      var zr = { _driver: "localStorageWrapper", _initStorage: Br, _support: Dr(), iterate: Cr, getItem: Or, setItem: Ur, removeItem: Fr, clear: xr, length: Mr, key: Lr, keys: Pr, dropInstance: Yr }, Wr = function(t, r) {
        return t === r || typeof t == "number" && typeof r == "number" && isNaN(t) && isNaN(r);
      }, Kr = function(t, r) {
        for (var o2 = t.length, i = 0; i < o2; ) {
          if (Wr(t[i], r))
            return true;
          i++;
        }
        return false;
      }, Xe2 = Array.isArray || function(e) {
        return Object.prototype.toString.call(e) === "[object Array]";
      }, le2 = {}, Qe2 = {}, ue = { INDEXEDDB: cr2, WEBSQL: Rr, LOCALSTORAGE: zr }, Hr = [ue.INDEXEDDB._driver, ue.WEBSQL._driver, ue.LOCALSTORAGE._driver], me2 = ["dropInstance"], Ie2 = ["clear", "getItem", "iterate", "key", "keys", "length", "removeItem", "setItem"].concat(me2), Vr = { description: "", driver: Hr.slice(), name: "localforage", size: 4980736, storeName: "keyvaluepairs", version: 1 };
      function Gr(e, t) {
        e[t] = function() {
          var r = arguments;
          return e.ready().then(function() {
            return e[t].apply(e, r);
          });
        };
      }
      function Se2() {
        for (var e = 1; e < arguments.length; e++) {
          var t = arguments[e];
          if (t)
            for (var r in t)
              t.hasOwnProperty(r) && (Xe2(t[r]) ? arguments[0][r] = t[r].slice() : arguments[0][r] = t[r]);
        }
        return arguments[0];
      }
      var jr = function() {
        function e(t) {
          Y2(this, e);
          for (var r in ue)
            if (ue.hasOwnProperty(r)) {
              var o2 = ue[r], i = o2._driver;
              this[r] = i, le2[i] || this.defineDriver(o2);
            }
          this._defaultConfig = Se2({}, Vr), this._config = Se2({}, this._defaultConfig, t), this._driverSet = null, this._initDriver = null, this._ready = false, this._dbInfo = null, this._wrapLibraryMethodsWithReady(), this.setDriver(this._config.driver).catch(function() {
          });
        }
        return e.prototype.config = function(r) {
          if ((typeof r == "undefined" ? "undefined" : C2(r)) === "object") {
            if (this._ready)
              return new Error("Can't call config() after localforage has been used.");
            for (var o2 in r) {
              if (o2 === "storeName" && (r[o2] = r[o2].replace(/\W/g, "_")), o2 === "version" && typeof r[o2] != "number")
                return new Error("Database version must be a number.");
              this._config[o2] = r[o2];
            }
            return "driver" in r && r.driver ? this.setDriver(this._config.driver) : true;
          } else
            return typeof r == "string" ? this._config[r] : this._config;
        }, e.prototype.defineDriver = function(r, o2, i) {
          var n = new m3(function(f2, u2) {
            try {
              var c = r._driver, l2 = new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");
              if (!r._driver) {
                u2(l2);
                return;
              }
              for (var d2 = Ie2.concat("_initStorage"), y2 = 0, A2 = d2.length; y2 < A2; y2++) {
                var T = d2[y2], x = !Kr(me2, T);
                if ((x || r[T]) && typeof r[T] != "function") {
                  u2(l2);
                  return;
                }
              }
              var V2 = function() {
                for (var de2 = function(Jr) {
                  return function() {
                    var $r = new Error("Method " + Jr + " is not implemented by the current driver"), Je2 = m3.reject($r);
                    return w2(Je2, arguments[arguments.length - 1]), Je2;
                  };
                }, Ae2 = 0, Qr = me2.length; Ae2 < Qr; Ae2++) {
                  var Re2 = me2[Ae2];
                  r[Re2] || (r[Re2] = de2(Re2));
                }
              };
              V2();
              var W2 = function(de2) {
                le2[c] && console.info("Redefining LocalForage driver: " + c), le2[c] = r, Qe2[c] = de2, f2();
              };
              "_support" in r ? r._support && typeof r._support == "function" ? r._support().then(W2, u2) : W2(!!r._support) : W2(true);
            } catch (X2) {
              u2(X2);
            }
          });
          return N2(n, o2, i), n;
        }, e.prototype.driver = function() {
          return this._driver || null;
        }, e.prototype.getDriver = function(r, o2, i) {
          var n = le2[r] ? m3.resolve(le2[r]) : m3.reject(new Error("Driver not found."));
          return N2(n, o2, i), n;
        }, e.prototype.getSerializer = function(r) {
          var o2 = m3.resolve(Ee2);
          return N2(o2, r), o2;
        }, e.prototype.ready = function(r) {
          var o2 = this, i = o2._driverSet.then(function() {
            return o2._ready === null && (o2._ready = o2._initDriver()), o2._ready;
          });
          return N2(i, r, r), i;
        }, e.prototype.setDriver = function(r, o2, i) {
          var n = this;
          Xe2(r) || (r = [r]);
          var f2 = this._getSupportedDrivers(r);
          function u2() {
            n._config.driver = n.driver();
          }
          function c(y2) {
            return n._extend(y2), u2(), n._ready = n._initStorage(n._config), n._ready;
          }
          function l2(y2) {
            return function() {
              var A2 = 0;
              function T() {
                for (; A2 < y2.length; ) {
                  var x = y2[A2];
                  return A2++, n._dbInfo = null, n._ready = null, n.getDriver(x).then(c).catch(T);
                }
                u2();
                var V2 = new Error("No available storage method found.");
                return n._driverSet = m3.reject(V2), n._driverSet;
              }
              return T();
            };
          }
          var d2 = this._driverSet !== null ? this._driverSet.catch(function() {
            return m3.resolve();
          }) : m3.resolve();
          return this._driverSet = d2.then(function() {
            var y2 = f2[0];
            return n._dbInfo = null, n._ready = null, n.getDriver(y2).then(function(A2) {
              n._driver = A2._driver, u2(), n._wrapLibraryMethodsWithReady(), n._initDriver = l2(f2);
            });
          }).catch(function() {
            u2();
            var y2 = new Error("No available storage method found.");
            return n._driverSet = m3.reject(y2), n._driverSet;
          }), N2(this._driverSet, o2, i), this._driverSet;
        }, e.prototype.supports = function(r) {
          return !!Qe2[r];
        }, e.prototype._extend = function(r) {
          Se2(this, r);
        }, e.prototype._getSupportedDrivers = function(r) {
          for (var o2 = [], i = 0, n = r.length; i < n; i++) {
            var f2 = r[i];
            this.supports(f2) && o2.push(f2);
          }
          return o2;
        }, e.prototype._wrapLibraryMethodsWithReady = function() {
          for (var r = 0, o2 = Ie2.length; r < o2; r++)
            Gr(this, Ie2[r]);
        }, e.prototype.createInstance = function(r) {
          return new e(r);
        }, e;
      }(), Xr = new jr();
      M.exports = Xr;
    }, { "3": 3 }] }, {}, [4])(4);
  });
});
var rr = $e2((ye2, er) => {
  (function(p2, g2) {
    typeof ye2 == "object" && typeof er != "undefined" ? g2(ye2) : typeof define == "function" && define.amd ? define("localforage-driver-memory", ["exports"], g2) : g2(p2.LocalforageDriverMemory = {});
  })(typeof self != "undefined" ? self : ye2, function(p2) {
    "use strict";
    var g2 = "localforage-driver-memory";
    function O2(a2) {
      var s = typeof Symbol == "function" && a2[Symbol.iterator], v = 0;
      return s ? s.call(a2) : { next: function() {
        return a2 && v >= a2.length && (a2 = void 0), { value: a2 && a2[v++], done: !a2 };
      } };
    }
    function L2(a2, s) {
      a2 = a2 || [], s = s || {};
      try {
        return new Blob(a2, s);
      } catch (E2) {
        if (E2.name !== "TypeError")
          throw E2;
        for (var v = typeof BlobBuilder != "undefined" ? BlobBuilder : typeof MSBlobBuilder != "undefined" ? MSBlobBuilder : typeof MozBlobBuilder != "undefined" ? MozBlobBuilder : WebKitBlobBuilder, b2 = new v(), _2 = 0; _2 < a2.length; _2 += 1)
          b2.append(a2[_2]);
        return b2.getBlob(s.type);
      }
    }
    var M = /^~~local_forage_type~([^~]+)~/, Q2 = "__lfsc__:".length, C2 = Q2 + "arbf".length, Y2 = Object.prototype.toString;
    function S2(a2) {
      var s = a2.length * 0.75, v = a2.length;
      a2[a2.length - 1] === "=" && (s--, a2[a2.length - 2] === "=" && s--);
      for (var b2 = new ArrayBuffer(s), _2 = new Uint8Array(b2), E2 = 0, D2 = 0; E2 < v; E2 += 4) {
        var G2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a2[E2]), fe2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a2[E2 + 1]), ie2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a2[E2 + 2]), ce2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a2[E2 + 3]);
        _2[D2++] = G2 << 2 | fe2 >> 4, _2[D2++] = (fe2 & 15) << 4 | ie2 >> 2, _2[D2++] = (ie2 & 3) << 6 | ce2 & 63;
      }
      return b2;
    }
    function P2(a2) {
      for (var s = new Uint8Array(a2), v = "", b2 = 0; b2 < s.length; b2 += 3)
        v += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[s[b2] >> 2], v += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(s[b2] & 3) << 4 | s[b2 + 1] >> 4], v += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(s[b2 + 1] & 15) << 2 | s[b2 + 2] >> 6], v += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[s[b2 + 2] & 63];
      return s.length % 3 === 2 ? v = v.substring(0, v.length - 1) + "=" : s.length % 3 === 1 && (v = v.substring(0, v.length - 2) + "=="), v;
    }
    function K2(a2, s) {
      var v = "";
      if (a2 && (v = Y2.call(a2)), a2 && (v === "[object ArrayBuffer]" || a2.buffer && Y2.call(a2.buffer) === "[object ArrayBuffer]")) {
        var b2 = void 0, _2 = "__lfsc__:";
        a2 instanceof ArrayBuffer ? (b2 = a2, _2 += "arbf") : (b2 = a2.buffer, v === "[object Int8Array]" ? _2 += "si08" : v === "[object Uint8Array]" ? _2 += "ui08" : v === "[object Uint8ClampedArray]" ? _2 += "uic8" : v === "[object Int16Array]" ? _2 += "si16" : v === "[object Uint16Array]" ? _2 += "ur16" : v === "[object Int32Array]" ? _2 += "si32" : v === "[object Uint32Array]" ? _2 += "ui32" : v === "[object Float32Array]" ? _2 += "fl32" : v === "[object Float64Array]" ? _2 += "fl64" : s(new Error("Failed to get type for BinaryArray"))), s(_2 + P2(b2));
      } else if (v === "[object Blob]") {
        var E2 = new FileReader();
        E2.onload = function() {
          var D2 = "~~local_forage_type~" + a2.type + "~" + P2(this.result);
          s("__lfsc__:blob" + D2);
        }, E2.readAsArrayBuffer(a2);
      } else
        try {
          s(JSON.stringify(a2));
        } catch (D2) {
          console.error("Couldn't convert value into a JSON string: ", a2), s(null, D2);
        }
    }
    function Z2(a2) {
      if (a2.substring(0, Q2) !== "__lfsc__:")
        return JSON.parse(a2);
      var s = a2.substring(C2), v = a2.substring(Q2, C2), b2;
      if (v === "blob" && M.test(s)) {
        var _2 = s.match(M);
        b2 = _2[1], s = s.substring(_2[0].length);
      }
      var E2 = S2(s);
      switch (v) {
        case "arbf":
          return E2;
        case "blob":
          return L2([E2], { type: b2 });
        case "si08":
          return new Int8Array(E2);
        case "ui08":
          return new Uint8Array(E2);
        case "uic8":
          return new Uint8ClampedArray(E2);
        case "si16":
          return new Int16Array(E2);
        case "ur16":
          return new Uint16Array(E2);
        case "si32":
          return new Int32Array(E2);
        case "ui32":
          return new Uint32Array(E2);
        case "fl32":
          return new Float32Array(E2);
        case "fl64":
          return new Float64Array(E2);
        default:
          throw new Error("Unkown type: " + v);
      }
    }
    function m3(a2) {
      var s, v;
      if (a2 === null || typeof a2 != "object" || "isActiveClone" in a2)
        return a2;
      var b2 = a2 instanceof Date ? new Date(a2) : a2.constructor();
      try {
        for (var _2 = O2(Object.keys(a2)), E2 = _2.next(); !E2.done; E2 = _2.next()) {
          var D2 = E2.value;
          Object.prototype.hasOwnProperty.call(a2, D2) && (a2.isActiveClone = null, b2[D2] = m3(a2[D2]), delete a2.isActiveClone);
        }
      } catch (G2) {
        s = { error: G2 };
      } finally {
        try {
          E2 && !E2.done && (v = _2.return) && v.call(_2);
        } finally {
          if (s)
            throw s.error;
        }
      }
      return b2;
    }
    function w2(a2, s) {
      return (a2.name || s.name) + "/" + (a2.storeName || s.storeName) + "/";
    }
    function N2(a2, s) {
      s && a2.then(function(v) {
        s(null, v);
      }, function(v) {
        s(v);
      });
    }
    function z2() {
      for (var a2 = [], s = 0; s < arguments.length; s++)
        a2[s] = arguments[s];
      if (arguments.length && typeof arguments[arguments.length - 1] == "function")
        return arguments[arguments.length - 1];
    }
    function q2(a2, s) {
      var v = this;
      if (s = z2.apply(this, arguments), a2 = typeof a2 != "function" && a2 || {}, !a2.name) {
        var b2 = this.config();
        a2.name = a2.name || b2.name, a2.storeName = a2.storeName || b2.storeName;
      }
      var _2;
      return a2.name ? _2 = new Promise(function(E2) {
        a2.storeName ? E2(w2(a2, v._defaultConfig)) : E2(a2.name + "/");
      }) : _2 = Promise.reject("Invalid arguments"), { promise: _2, callback: s };
    }
    function F2(a2) {
      return typeof a2 != "string" && (console.warn(a2 + " used as a key, but it is not a string."), a2 = String(a2)), a2;
    }
    var k = { bufferToString: P2, deserialize: Z2, serialize: K2, stringToBuffer: S2 }, U2 = {}, ae2 = function() {
      function a2(s) {
        this.kp = s, this.data = {};
      }
      return a2.resolve = function(s) {
        return U2[s] || (U2[s] = new a2(s)), U2[s];
      }, a2.prototype.clear = function() {
        this.data = {};
      }, a2.prototype.drop = function() {
        this.clear(), delete U2[this.kp];
      }, a2.prototype.get = function(s) {
        return this.data[s];
      }, a2.prototype.key = function(s) {
        return this.keys()[s];
      }, a2.prototype.keys = function() {
        return Object.keys(this.data);
      }, a2.prototype.rm = function(s) {
        delete this.data[s];
      }, a2.prototype.set = function(s, v) {
        this.data[s] = v;
      }, a2;
    }();
    function re2(a2) {
      var s = a2 ? m3(a2) : {}, v = w2(s, this._defaultConfig), b2 = ae2.resolve(v);
      return this._dbInfo = s, this._dbInfo.serializer = k, this._dbInfo.keyPrefix = v, this._dbInfo.mStore = b2, Promise.resolve();
    }
    function h2(a2) {
      var s = this, v = this.ready().then(function() {
        s._dbInfo.mStore.clear();
      });
      return N2(v, a2), v;
    }
    function R2(a2, s) {
      var v = q2.apply(this, arguments), b2 = v.promise, _2 = v.callback, E2 = b2.then(function(D2) {
        ae2.resolve(D2).drop();
      });
      return N2(E2, _2), b2;
    }
    function I2(a2, s) {
      var v = this;
      a2 = F2(a2);
      var b2 = this.ready().then(function() {
        var _2 = v._dbInfo.mStore.get(a2);
        return _2 == null ? null : v._dbInfo.serializer.deserialize(_2);
      });
      return N2(b2, s), b2;
    }
    function B(a2, s) {
      var v = this, b2 = this.ready().then(function() {
        for (var _2 = v._dbInfo.mStore, E2 = _2.keys(), D2 = 0; D2 < E2.length; D2++) {
          var G2 = _2.get(E2[D2]);
          if (G2 && (G2 = v._dbInfo.serializer.deserialize(G2)), G2 = a2(G2, E2[D2], D2 + 1), G2 !== void 0)
            return G2;
        }
      });
      return N2(b2, s), b2;
    }
    function H2(a2, s) {
      var v = this, b2 = this.ready().then(function() {
        var _2;
        try {
          _2 = v._dbInfo.mStore.key(a2), _2 === void 0 && (_2 = null);
        } catch {
          _2 = null;
        }
        return _2;
      });
      return N2(b2, s), b2;
    }
    function j2(a2) {
      var s = this, v = this.ready().then(function() {
        return s._dbInfo.mStore.keys();
      });
      return N2(v, a2), v;
    }
    function J(a2) {
      var s = this.keys().then(function(v) {
        return v.length;
      });
      return N2(s, a2), s;
    }
    function $2(a2, s) {
      var v = this;
      a2 = F2(a2);
      var b2 = this.ready().then(function() {
        v._dbInfo.mStore.rm(a2);
      });
      return N2(b2, s), b2;
    }
    function ee2(a2, s, v) {
      var b2 = this;
      a2 = F2(a2);
      var _2 = this.ready().then(function() {
        s === void 0 && (s = null);
        var E2 = s;
        return new Promise(function(D2, G2) {
          b2._dbInfo.serializer.serialize(s, function(fe2, ie2) {
            if (ie2)
              G2(ie2);
            else
              try {
                b2._dbInfo.mStore.set(a2, fe2), D2(E2);
              } catch (ce2) {
                G2(ce2);
              }
          });
        });
      });
      return N2(_2, v), _2;
    }
    var oe2 = true;
    p2._support = oe2, p2._driver = g2, p2._initStorage = re2, p2.clear = h2, p2.dropInstance = R2, p2.getItem = I2, p2.iterate = B, p2.key = H2, p2.keys = j2, p2.length = J, p2.removeItem = $2, p2.setItem = ee2, Object.defineProperty(p2, "__esModule", { value: true });
  });
});
var pe2 = Ze2(ke2());
var Be2 = Ze2(rr());
var ft2 = { display: "none", position: "fixed", top: "0", right: "0", width: "100%", height: "100%", borderRadius: "0", border: "none", zIndex: "2147483647" };
function ut2(p2) {
  for (let [g2, O2] of Object.entries(ft2))
    p2.style[g2] = O2;
}
function st2(p2) {
  let g2 = [].slice.call(document.querySelectorAll(".magic-iframe"));
  return Boolean(g2.find((O2) => O2.src.includes(p2)));
}
var Te2 = class extends yt {
  constructor() {
    super(...arguments);
    this.activeElement = null;
  }
  init() {
    this.test = "hello", this.iframe = new Promise((g2) => {
      let O2 = () => {
        if (st2(encodeURIComponent(this.parameters)))
          lr().log();
        else {
          let L2 = document.createElement("iframe");
          L2.classList.add("magic-iframe"), L2.dataset.magicIframeLabel = xe(this.endpoint).host, L2.title = "Secure Modal", L2.src = xe(`/send?params=${encodeURIComponent(this.parameters)}`, this.endpoint).href, ut2(L2), document.body.appendChild(L2), g2(L2);
        }
      };
      ["loaded", "interactive", "complete"].includes(document.readyState) ? O2() : window.addEventListener("load", O2, false);
    }), window.addEventListener("message", (g2) => {
      var O2;
      if (g2.origin === this.endpoint && g2.data && g2.data.msgType && this.messageHandlers.size) {
        g2.data.response = (O2 = g2.data.response) != null ? O2 : {};
        for (let L2 of this.messageHandlers.values())
          L2(g2);
      }
    });
  }
  showOverlay() {
    return se(this, null, function* () {
      let g2 = yield this.iframe;
      g2.style.display = "block", this.activeElement = document.activeElement, g2.focus();
    });
  }
  hideOverlay() {
    return se(this, null, function* () {
      var O2;
      let g2 = yield this.iframe;
      g2.style.display = "none", ((O2 = this.activeElement) == null ? void 0 : O2.focus) && this.activeElement.focus(), this.activeElement = null;
    });
  }
  _post(g2) {
    return se(this, null, function* () {
      let O2 = yield this.iframe;
      if (O2 && O2.contentWindow)
        O2.contentWindow.postMessage(g2, this.endpoint);
      else
        throw cr();
    });
  }
};
var _t2 = Tn(Pe, { platform: "web", sdkName: "magic-sdk", version: "8.1.0", defaultEndpoint: "https://auth.magic.link/", ViewController: Te2, configureStorage: () => se(void 0, null, function* () {
  let p2 = pe2.default.createInstance({ name: "MagicAuthLocalStorageDB", storeName: "MagicAuthLocalStorage" });
  return yield p2.defineDriver(Be2), yield p2.setDriver([pe2.default.INDEXEDDB, pe2.default.LOCALSTORAGE, Be2._driver]), p2;
}) });
export {
  l as EthChainType,
  S as Extension,
  X as ExtensionError,
  re as ExtensionWarning,
  _t2 as Magic,
  o as MagicIncomingWindowMessage,
  g as MagicOutgoingWindowMessage,
  u as MagicPayloadMethod,
  A as RPCError,
  m as RPCErrorCode,
  b as SDKError,
  a as SDKErrorCode,
  W as SDKWarning,
  p as SDKWarningCode,
  it as isPromiEvent
};
//# sourceMappingURL=es-BVFCV7J4.js.map
